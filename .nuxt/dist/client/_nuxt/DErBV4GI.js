import{_ as N}from"./BRXEsc8B.js";import{_ as T}from"./9Izdmuga.js";import{_ as M}from"./oZfRzh-Q.js";import{u as V}from"./JGZA2kR1.js";import{u as L}from"./6jrzLyMP.js";import{g as S,u as A,C as E,h as I,G as R,r as c,m as q,j as O,i as D,c as l,a as t,l as G,b as n,t as o,w as r,f as j,o as d,d as p}from"./CyjY5H8A.js";import"./DlAUqK2U.js";import"./CLdyUvtB.js";const H={class:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center px-4"},J={class:"max-w-md w-full"},F={key:0,class:"text-center"},K={class:"mt-4 text-gray-600 dark:text-gray-400"},P={key:1,class:"text-center"},Q={class:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2"},U={class:"text-gray-600 dark:text-gray-400 mb-6"},W={key:2,class:"text-center"},X={class:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2"},Y={class:"text-gray-600 dark:text-gray-400 mb-6"},Z={key:3,class:"text-center"},tt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2"},et={class:"text-gray-600 dark:text-gray-400 mb-6"},ct=S({__name:"join",setup(ot){const{t:x}=A(),z=E(),{$rpc:w}=I(),$=L(),{isAuthenticated:g}=R($),{error:C}=V(),m=c(!1),s=c(""),f=c(!1),u=c(null),i=q(()=>z.query.token),k=async()=>{if(!i.value){s.value=x("organizations.join.noToken");return}m.value=!0,s.value="";try{const e=await w.organizations.acceptInvitation({token:i.value});f.value=!0,u.value=e.organization}catch(e){const a=e instanceof Error?e.message:x("organizations.join.failed");s.value=a,C(a)}finally{m.value=!1}};return O(()=>{g.value&&i.value&&k()}),D(g,e=>{e&&i.value&&!f.value&&!s.value&&k()}),(e,a)=>{var y,h,b;const B=N,v=T,_=M;return d(),l("div",H,[t("div",J,[m.value?(d(),l("div",F,[n(B,{size:"lg"}),t("p",K,o(e.$t("organizations.join.verifying")),1)])):s.value?(d(),l("div",P,[a[0]||(a[0]=t("div",{class:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t("h2",Q,o(e.$t("organizations.join.failed")),1),t("p",U,o(s.value),1),n(_,{to:"/organizations"},{default:r(()=>[n(v,{variant:"primary"},{default:r(()=>[p(o(e.$t("organizations.join.backToOrganizations")),1)]),_:1})]),_:1})])):f.value?(d(),l("div",W,[a[1]||(a[1]=t("div",{class:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"w-8 h-8 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t("h2",X,o(e.$t("organizations.join.joined")),1),t("p",Y,o(((y=u.value)==null?void 0:y.displayName)||((h=u.value)==null?void 0:h.name))+" "+o(e.$t("organizations.join.welcome")),1),n(_,{to:`/organizations/${(b=u.value)==null?void 0:b.id}`},{default:r(()=>[n(v,{variant:"primary"},{default:r(()=>[p(o(e.$t("organizations.join.goToOrganization")),1)]),_:1})]),_:1},8,["to"])])):j(g)?G("",!0):(d(),l("div",Z,[a[2]||(a[2]=t("div",{class:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"w-8 h-8 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),t("h2",tt,o(e.$t("organizations.join.loginRequired")),1),t("p",et,o(e.$t("organizations.join.loginToJoin")),1),n(_,{to:`/login?redirect=/organizations/join?token=${j(i)}`},{default:r(()=>[n(v,{variant:"primary"},{default:r(()=>[p(o(e.$t("organizations.join.login")),1)]),_:1})]),_:1},8,["to"])]))])])}}});export{ct as default};
