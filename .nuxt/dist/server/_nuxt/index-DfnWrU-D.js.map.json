{"file":"index-DfnWrU-D.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","$t","_ssrRenderComponent","_push","_parent","_","_scopeId","_createBlock","_createVNode","_createTextVNode","_ssrRenderList","_ssrInterpolate","_toDisplayString"],"sources":["../../../../pages/organizations/index.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n    <div class=\"container-lg py-8\">\n      <!-- ヘッダー -->\n      <div class=\"flex items-center justify-between mb-8\">\n        <div>\n          <h1 class=\"heading-1 mb-2\">{{ $t('organizations.title') }}</h1>\n          <p class=\"text-gray-600 dark:text-gray-400\">\n            {{ $t('organizations.subtitle') }}\n          </p>\n        </div>\n        <NuxtLink to=\"/organizations/new\">\n          <CommonButton variant=\"primary\">\n            <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\n            </svg>\n            {{ $t('organizations.createOrganization') }}\n          </CommonButton>\n        </NuxtLink>\n      </div>\n\n      <!-- チーム一覧 -->\n      <div v-if=\"loading\" class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <div v-for=\"i in 6\" :key=\"i\" class=\"card\">\n          <div class=\"skeleton h-6 w-3/4 mb-3\"></div>\n          <div class=\"skeleton h-4 w-full mb-2\"></div>\n          <div class=\"skeleton h-4 w-2/3\"></div>\n        </div>\n      </div>\n\n      <div v-else-if=\"organizations.length === 0\" class=\"text-center py-12\">\n        <svg class=\"w-24 h-24 mx-auto text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n        </svg>\n        <h3 class=\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2\">\n          {{ $t('organizations.noOrganizations') }}\n        </h3>\n        <p class=\"text-gray-600 dark:text-gray-400 mb-6\">\n          {{ $t('organizations.createFirstOrganization') }}\n        </p>\n        <NuxtLink to=\"/organizations/new\">\n          <CommonButton variant=\"primary\">\n            {{ $t('organizations.createOrganization') }}\n          </CommonButton>\n        </NuxtLink>\n      </div>\n\n      <div v-else class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        <NuxtLink\n          v-for=\"organization in organizations\"\n          :key=\"organization.id\"\n          :to=\"`/organizations/${organization.id}`\"\n          class=\"card-hover group\"\n        >\n          <div class=\"flex items-start justify-between mb-4\">\n            <div class=\"w-12 h-12 bg-primary-500 rounded-xl flex items-center justify-center text-white font-bold text-lg group-hover:scale-105 transition-transform\">\n              {{ organization.name[0].toUpperCase() }}\n            </div>\n            <span class=\"badge badge-primary\">\n              {{ organization.role }}\n            </span>\n          </div>\n          \n          <h3 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2\">\n            {{ organization.name }}\n          </h3>\n          \n          <p class=\"text-gray-600 dark:text-gray-400 text-sm mb-4\">\n            {{ organization.description || $t('organizations.noDescription') }}\n          </p>\n          \n          <div class=\"flex items-center justify-between text-sm\">\n            <div class=\"flex items-center space-x-4\">\n              <span class=\"flex items-center text-gray-600 dark:text-gray-400\">\n                <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\n                </svg>\n                {{ organization.memberCount }} {{ $t('organizations.members') }}\n              </span>\n              <span class=\"flex items-center text-gray-600 dark:text-gray-400\">\n                <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                {{ organization.ruleCount }} {{ $t('organizations.rules') }}\n              </span>\n            </div>\n          </div>\n        </NuxtLink>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref } from \"vue\";\nimport { useToast } from \"~/composables/useToast\";\nimport { useAuthStore } from \"~/stores/auth\";\n\ndefinePageMeta({\n\tmiddleware: \"auth\",\n});\n\ninterface Organization {\n\tid: string;\n\tname: string;\n\tdescription?: string;\n\trole: \"owner\" | \"member\";\n\tmemberCount: number;\n\truleCount: number;\n\tcreatedAt: string;\n}\n\nconst { t } = useI18n();\nconst loading = ref(false);\nconst organizations = ref<Organization[]>([]);\n\nconst authStore = useAuthStore();\nconst { user } = storeToRefs(authStore);\nconst { error: toastError } = useToast();\n\nconst { $rpc } = useNuxtApp();\n\nconst fetchOrganizations = async () => {\n\tloading.value = true;\n\ttry {\n\t\tconst data = await $rpc.organizations.list();\n\n\t\t// APIレスポンスをページで使用する形式に変換\n\t\torganizations.value = data.map((organization) => ({\n\t\t\tid: organization.id,\n\t\t\tname: organization.displayName || organization.name,\n\t\t\tdescription: \"\", // APIにdescriptionフィールドがないため空文字\n\t\t\trole: organization.owner.id === user.value?.id ? \"owner\" : \"member\",\n\t\t\tmemberCount: organization.memberCount,\n\t\t\truleCount: organization.ruleCount || 0,\n\t\t\tcreatedAt: organization.createdAt\n\t\t\t\t? new Date(organization.createdAt * 1000).toISOString()\n\t\t\t\t: new Date().toISOString(),\n\t\t}));\n\t} catch (error) {\n\t\tconsole.error(\"Failed to fetch organizations:\", error);\n\t\ttoastError(t(\"organizations.messages.fetchError\"));\n\t} finally {\n\t\tloading.value = false;\n\t}\n};\n\nonMounted(() => {\n\tfetchOrganizations();\n});\n</script>"],"version":3}