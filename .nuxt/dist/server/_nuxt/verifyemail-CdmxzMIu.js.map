{"version":3,"file":"verifyemail-CdmxzMIu.js","sources":["../../../../pages/verifyemail.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n    <div class=\"max-w-md w-full space-y-8\">\n      <div class=\"text-center\">\n        <h2 class=\"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white\">\n          {{ $t('auth.verifyEmail.title') }}\n        </h2>\n        <p class=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\n          {{ $t('auth.verifyEmail.verifying') }}\n        </p>\n      </div>\n\n      <!-- Content states -->\n      <Transition name=\"pulse-fade\" mode=\"out-in\">\n        <!-- Loading state -->\n        <div v-if=\"loading\" key=\"loading\" class=\"flex justify-center\">\n          <div class=\"relative\">\n            <div class=\"absolute inset-0 animate-ping rounded-full h-12 w-12 bg-primary-400 opacity-20\"></div>\n            <svg class=\"animate-spin h-10 w-10 text-primary-600 relative\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n              <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n          </div>\n        </div>\n\n        <!-- Success state -->\n        <div v-else-if=\"success\" key=\"success\" class=\"rounded-lg bg-green-50 dark:bg-green-900/20 p-6 card-entrance\">\n          <div class=\"flex\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"h-5 w-5 text-green-400 checkmark-animation\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" />\n              </svg>\n            </div>\n            <div class=\"ml-3\">\n              <h3 class=\"text-sm font-medium text-green-800 dark:text-green-200\">\n                {{ $t('auth.verifyEmail.success') }}\n              </h3>\n              <div class=\"mt-2 text-sm text-green-700 dark:text-green-300\">\n                <p>{{ $t('auth.verifyEmail.successMessage') }}</p>\n                <p class=\"mt-1\">{{ $t('auth.verifyEmail.successDescription') }}</p>\n              </div>\n              <div class=\"mt-4\">\n                <NuxtLink\n                  to=\"/auth\"\n                  class=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 button-hover\"\n                >\n                  {{ $t('auth.verifyEmail.goToLogin') }}\n                </NuxtLink>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Error state -->\n        <div v-else-if=\"error\" key=\"error\" class=\"rounded-lg bg-red-50 dark:bg-red-900/20 p-6 error-shake\">\n          <div class=\"flex\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"h-5 w-5 text-red-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n              </svg>\n            </div>\n            <div class=\"ml-3\">\n              <h3 class=\"text-sm font-medium text-red-800 dark:text-red-200\">\n                {{ $t('auth.verifyEmail.error') }}\n              </h3>\n              <div class=\"mt-2 text-sm text-red-700 dark:text-red-300\">\n                <p>{{ errorMessage }}</p>\n              </div>\n              <div class=\"mt-4 flex space-x-3\">\n                <NuxtLink\n                  to=\"/register\"\n                  class=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                >\n                  {{ $t('auth.verifyEmail.register') }}\n                </NuxtLink>\n                <button\n                  @click=\"resendVerification\"\n                  :disabled=\"resending\"\n                  class=\"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {{ resending ? $t('auth.verifyEmail.resending') : $t('auth.verifyEmail.resendEmail') }}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- No token state -->\n        <div v-else key=\"no-token\" class=\"rounded-lg bg-yellow-50 dark:bg-yellow-900/20 p-6 card-entrance\">\n          <div class=\"flex\">\n            <div class=\"flex-shrink-0\">\n              <svg class=\"h-5 w-5 text-yellow-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\" />\n              </svg>\n            </div>\n            <div class=\"ml-3\">\n              <h3 class=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">\n                {{ $t('auth.verifyEmail.noToken') }}\n              </h3>\n              <div class=\"mt-2 text-sm text-yellow-700 dark:text-yellow-300\">\n                <p>{{ $t('auth.verifyEmail.noTokenMessage') }}</p>\n                <p class=\"mt-1\">{{ $t('auth.verifyEmail.noTokenDescription') }}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Transition>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from \"vue\";\n\nconst { $t } = useNuxtApp();\n\nuseHead({\n\ttitle: $t(\"auth.verifyEmail.pageTitle\"),\n});\n\nconst route = useRoute();\nconst { $rpc } = useNuxtApp();\n\nconst loading = ref(true);\nconst success = ref(false);\nconst error = ref(false);\nconst errorMessage = ref(\"\");\nconst resending = ref(false);\n\nconst verifyEmail = async () => {\n\tconst token = route.query.token;\n\n\tif (!token) {\n\t\tloading.value = false;\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst response = await $rpc.auth.verifyEmail({ token });\n\n\t\tif (response.success) {\n\t\t\tsuccess.value = true;\n\t\t} else {\n\t\t\terror.value = true;\n\t\t\terrorMessage.value = response.message || $t(\"auth.verifyEmail.errorMessage\");\n\t\t}\n\t} catch (err) {\n\t\terror.value = true;\n\t\terrorMessage.value = err.message || $t(\"auth.verifyEmail.invalidToken\");\n\t} finally {\n\t\tloading.value = false;\n\t}\n};\n\nconst resendVerification = async () => {\n\tresending.value = true;\n\n\t// Get email from query parameter or prompt user\n\tconst email = route.query.email || prompt($t(\"auth.verifyEmail.enterEmail\"));\n\n\tif (!email) {\n\t\tresending.value = false;\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst response = await $rpc.auth.sendVerification({\n\t\t\temail,\n\t\t\tlocale: \"ja\",\n\t\t});\n\n\t\tif (response.success) {\n\t\t\talert($t(\"auth.verifyEmail.emailResent\"));\n\t\t} else {\n\t\t\talert(response.message || $t(\"auth.verifyEmail.resendError\"));\n\t\t}\n\t} catch (err) {\n\t\talert(err.message || $t(\"auth.verifyEmail.generalError\"));\n\t} finally {\n\t\tresending.value = false;\n\t}\n};\n\nonMounted(() => {\n\tverifyEmail();\n});\n</script>\n\n<style scoped>\n/* Fade and scale animation */\n.fade-scale-enter-active {\n  transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.fade-scale-enter-from {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px);\n}\n\n/* Pulse fade animation for loading */\n.pulse-fade-enter-active,\n.pulse-fade-leave-active {\n  transition: all 0.3s ease;\n}\n\n.pulse-fade-enter-from {\n  opacity: 0;\n  transform: scale(0.8);\n}\n\n.pulse-fade-leave-to {\n  opacity: 0;\n  transform: scale(1.2);\n}\n\n/* Checkmark animation */\n@keyframes checkmarkDraw {\n  0% {\n    opacity: 0;\n    transform: scale(0) rotate(-45deg);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1.2) rotate(5deg);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) rotate(0deg);\n  }\n}\n\n.checkmark-animation {\n  animation: checkmarkDraw 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;\n}\n\n/* Card entrance animation is already defined in transitions.css */\n/* Error shake animation is already defined in transitions.css */\n</style>"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_push","_parent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA,UAAM,EAAE,GAAE,IAAK,WAAU;AAEzB,YAAQ;AAAA,MACP,OAAO,GAAG,4BAA4B;AAAA,IACvC,CAAC;AAEa,aAAQ;AACtB,UAAM,EAAE,KAAI,IAAK,WAAU;AAE3B,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,UAAU,IAAI,KAAK;AACzB,UAAM,QAAQ,IAAI,KAAK;AACvB,UAAM,eAAe,IAAI,EAAE;AAC3B,UAAM,YAAY,IAAI,KAAK;;;mBA9HpBA,eAAAC,WAAA,EAAA,OAAM,2EAA0E,GAAA,MAAA,CAAA,2NAI1EC,MAAA,EAAA,EAAE,wBAAA,CAAA,iGAGFA,MAAA,EAAA,EAAE,4BAAA,CAAA;UAOI,QAAA,OAAO;;iBAWF,QAAA,OAAO;2qBASZA,MAAA,EAAA,EAAE,0BAAA,CAAA,wHAGCA,MAAA,EAAA,EAAE,iCAAA,CAAA,uDACWA,MAAA,EAAA,EAAE,qCAAA,CAAA;;UAInB,IAAG;AAAA,UACH,OAAM;AAAA;2BAFR,CAKW,GAAAC,QAAAC,UAAA,aAAA;;uCADNF,MAAA,EAAA,EAAE,4BAAA,CAAA,CAAA,EAAA;AAAA;;gDAAFA,MAAA,EAAA,EAAE,4BAAA,CAAA,GAAA,CAAA;AAAA;;;;;;iBAQC,MAAA,OAAK;6tBASVA,MAAA,EAAA,EAAE,wBAAA,CAAA,oHAGC,aAAA,KAAY;;UAIhB,IAAG;AAAA,UACH,OAAM;AAAA;2BAFR,CAKW,GAAAC,QAAAC,UAAA,aAAA;;uCADNF,MAAA,EAAA,EAAE,2BAAA,CAAA,CAAA,EAAA;AAAA;;gDAAFA,MAAA,EAAA,EAAE,2BAAA,CAAA,GAAA,CAAA;AAAA;;;;;8CAIM,UAAA,KAAS,IAAA,cAAA,sXAGjB,UAAA,QAAYA,MAAA,EAAA,EAAE,4BAAA,IAAiCA,MAAA,EAAA,EAAE,8BAAA,CAAA;;wuBAiBnDA,MAAA,EAAA,EAAE,0BAAA,CAAA,0HAGCA,MAAA,EAAA,EAAE,iCAAA,CAAA,uDACWA,MAAA,EAAA,EAAE,qCAAA,CAAA;;;;;;;;;;;;;"}