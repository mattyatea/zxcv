{"file":"_username_-CDj5tN4C.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,UAAM,QAAQ;AAYd,UAAM,eAAe,SAAS,MAAM;AACnC,YAAM,OAAO;AAEb,YAAM,WAAW;AAAA,QAChB,SAAS;AAAA,QACT,SAAS;AAAA,QACT,SAAS;AAAA,QACT,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,MAAM;AAAA,MAAA;AAGP,YAAM,QAAQ;AAAA,QACb,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,IAAI;AAAA,MAAA;AAGL,YAAM,gBAAgB;AAAA,QACrB,IAAI;AAAA,QACJ,IAAI;AAAA,QACJ,MAAM;AAAA,MAAA;AAGP,aAAO,CAAC,MAAM,SAAS,MAAM,OAAO,GAAG,MAAM,MAAM,IAAI,GAAG,cAAc,MAAM,OAAO,CAAC,EAAE,KAAK,GAAG;AAAA,IACjG,CAAC;;AAvEQ,YAAA,QAAAA,eAAAC,WAAA,EAAA,OAAO,aAAA,MAAA,GAAY,MAAA,CAAA,CAAA,mBAAA;AACZC,UAAAA,KAAAA,OAAO,QAAQC,KAAAA,QAAQC,KAAAA,KAAG;;YACxBA,KAAAA,KAAG;;;;gBAEeD,KAAAA,MAAI;wEAAhBA,KAAAA,IAAI,GAAA,MAAA,IAAA,GAAA,OAAA;AAAA;;;;;;;;;;UAKhBE,KAAAA,UAAQ;;;;;;;;;;;;;;;;;;;;ACgQN,aAAA;AACd,UAAM,EAAE,MAAM,GAAA,IAAO,WAAA;AACrB,UAAM,YAAY,aAAA;AAClB,UAAM,EAAE,MAAM,gBAAgB,YAAY,SAAS;AAyBnD,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,QAAQ,IAAmB,IAAI;AACrC,UAAM,OAAO,IAAwB,IAAI;AACzC,UAAM,QAAQ,IAAI;AAAA,MACjB,YAAY;AAAA,MACZ,oBAAoB;AAAA,IAAA,CACpB;AACD,UAAM,cAAc,IAAY,EAAE;AAClC,UAAM,YAAY,IAAI,KAAK;AAC3B,UAAM,WAAW,IAAI,KAAK;AAC1B,UAAM,cAAc,IAAmB,IAAI;AAC3C,UAAM,WAAW,IAAI;AAAA,MACpB,UAAU;AAAA,MACV,OAAO;AAAA,IAAA,CACP;AACD,UAAM,SAAS,IAA4B,EAAE;AAG7C,UAAM,qBAAqB,IAAI,KAAK;AACpC,UAAM,mBAAmB,IAAI,KAAK;AAClC,UAAM,gBAAgB,IAAmB,IAAI;AAC7C,UAAM,eAAe,IAAI;AAAA,MACxB,iBAAiB;AAAA,MACjB,aAAa;AAAA,MACb,iBAAiB;AAAA,IAAA,CACjB;AACD,UAAM,iBAAiB,IAA4B,EAAE;AAGrD,UAAM,mBAAmB,IAAI,KAAK;AAGlC,UAAM,eAAe,SAAS,MAAM;;AACnC,eAAO,iBAAY,UAAZ,mBAAmB,UAAO,UAAK,UAAL,mBAAY;AAAA,IAC9C,CAAC;AAED,UAAM,cAAc,SAAS,MAAM;AAClC,YAAM,cAAc,SAAS,MAAM,SAAS,KAAA,EAAO,SAAS;AAC5D,YAAM,WAAW,SAAS,MAAM,MAAM,KAAA,EAAO,SAAS;AACtD,YAAM,cAAc,CAAC,OAAO,MAAM,YAAY,CAAC,OAAO,MAAM;AAC5D,aAAO,eAAe,YAAY;AAAA,IACnC,CAAC;AAED,UAAM,sBAAsB,SAAS,MAAM;AAC1C,aACC,aAAa,MAAM,gBAAgB,SAAS,KAC5C,aAAa,MAAM,YAAY,UAAU,KACzC,aAAa,MAAM,gBAAgB,SAAS,KAC5C,OAAO,KAAK,eAAe,KAAK,EAAE,WAAW;AAAA,IAE/C,CAAC;AAGD,UAAM,aAAa,CAAC,cAAsB;AACzC,YAAM,OAAO,IAAI,KAAK,YAAY,GAAI;AACtC,aAAO,KAAK,mBAAmB,SAAS;AAAA,QACvC,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,MAAA,CACL;AAAA,IACF;AA0CA,UAAM,mBAAmB,MAAM;AAC9B,aAAO,MAAM,WAAW;AACxB,YAAM,WAAW,SAAS,MAAM,SAAS,KAAA;AAEzC,UAAI,CAAC,UAAU;AACd,eAAO,MAAM,WAAW,GAAG,iCAAiC;AAAA,MAC7D,WAAW,CAAC,mBAAmB,KAAK,QAAQ,GAAG;AAC9C,eAAO,MAAM,WAAW,GAAG,gCAAgC;AAAA,MAC5D,WAAW,SAAS,SAAS,GAAG;AAC/B,eAAO,MAAM,WAAW,GAAG,kCAAkC;AAAA,MAC9D;AAAA,IACD;AAEA,UAAM,gBAAgB,MAAM;AAC3B,aAAO,MAAM,QAAQ;AACrB,YAAM,QAAQ,SAAS,MAAM,MAAM,KAAA;AAEnC,UAAI,CAAC,OAAO;AACX,eAAO,MAAM,QAAQ,GAAG,8BAA8B;AAAA,MACvD,WAAW,CAAC,6BAA6B,KAAK,KAAK,GAAG;AACrD,eAAO,MAAM,QAAQ,GAAG,6BAA6B;AAAA,MACtD;AAAA,IACD;AAEA,UAAM,sBAAsB,MAAM;AACjC,qBAAe,MAAM,cAAc;AACnC,UAAI,aAAa,MAAM,YAAY,SAAS,GAAG;AAC9C,uBAAe,MAAM,cAAc,GAAG,kCAAkC;AAAA,MACzE;AAAA,IACD;AAEA,UAAM,0BAA0B,MAAM;AACrC,qBAAe,MAAM,kBAAkB;AACvC,UAAI,aAAa,MAAM,gBAAgB,aAAa,MAAM,iBAAiB;AAC1E,uBAAe,MAAM,kBAAkB,GAAG,iCAAiC;AAAA,MAC5E;AAAA,IACD;AAEA,UAAM,gBAAgB,YAAY;AACjC,cAAQ,IAAI,sBAAsB;AAClC,cAAQ,IAAI,gBAAgB,YAAY,KAAK;AAC7C,cAAQ,IAAI,aAAa,SAAS,KAAK;AACvC,cAAQ,IAAI,WAAW,OAAO,KAAK;AAEnC,UAAI;AACH,iBAAS,QAAQ;AACjB,oBAAY,QAAQ;AAGpB,yBAAA;AACA,sBAAA;AAEA,YAAI,CAAC,YAAY,OAAO;AACvB,kBAAQ,IAAI,4BAA4B;AACxC;AAAA,QACD;AAEA,gBAAQ,IAAI,qBAAqB;AAAA,UAChC,UAAU,SAAS,MAAM,SAAS,KAAA;AAAA,UAClC,OAAO,SAAS,MAAM,MAAM,KAAA;AAAA,QAAK,CACjC;AAED,cAAM,SAAS,MAAM,KAAK,MAAM,cAAc;AAAA,UAC7C,UAAU,SAAS,MAAM,SAAS,KAAA;AAAA,UAClC,OAAO,SAAS,MAAM,MAAM,KAAA;AAAA,QAAK,CACjC;AAED,gBAAQ,IAAI,iBAAiB,MAAM;AAGnC,aAAK,QAAQ,OAAO;AACpB,kBAAU,QAAQ;AAGlB,YAAI,aAAa,OAAO;AACvB,gBAAM,UAAU,WAAW,OAAO,IAAI;AAAA,QACvC;AAGA,cAAM,EAAE,QAAA,IAAY,SAAA;AACpB,gBAAQ,GAAG,gCAAgC,CAAC;AAAA,MAC7C,SAAS,KAAc;AACtB,gBAAQ,MAAM,6BAA6B,GAAG;AAE9C,YAAI,eAAe,OAAO;AACzB,cAAI,IAAI,QAAQ,SAAS,gBAAgB,GAAG;AAC3C,wBAAY,QAAQ,GAAG,qCAAqC;AAAA,UAC7D,OAAO;AACN,wBAAY,QAAQ,IAAI,WAAW,GAAG,6BAA6B;AAAA,UACpE;AAAA,QACD,OAAO;AACN,sBAAY,QAAQ,GAAG,6BAA6B;AAAA,QACrD;AAAA,MACD,UAAA;AACC,iBAAS,QAAQ;AAAA,MAClB;AAAA,IACD;AAEA,UAAM,aAAa,MAAM;AACxB,gBAAU,QAAQ;AAClB,kBAAY,QAAQ;AACpB,aAAO,QAAQ,CAAA;AAEf,UAAI,KAAK,OAAO;AACf,iBAAS,QAAQ;AAAA,UAChB,UAAU,KAAK,MAAM;AAAA,UACrB,OAAO,KAAK,MAAM;AAAA,QAAA;AAAA,MAEpB;AACA,cAAQ,IAAI,gCAAgC,OAAO,KAAK;AAAA,IACzD;AAEA,UAAM,iBAAiB,YAAY;AAClC,UAAI;AACH,yBAAiB,QAAQ;AACzB,sBAAc,QAAQ;AAGtB,4BAAA;AACA,gCAAA;AAEA,YAAI,CAAC,oBAAoB,OAAO;AAC/B;AAAA,QACD;AAEA,cAAM,KAAK,MAAM,eAAe;AAAA,UAC/B,iBAAiB,aAAa,MAAM;AAAA,UACpC,aAAa,aAAa,MAAM;AAAA,QAAA,CAChC;AAGD,qBAAa,QAAQ;AAAA,UACpB,iBAAiB;AAAA,UACjB,aAAa;AAAA,UACb,iBAAiB;AAAA,QAAA;AAElB,uBAAe,QAAQ,CAAA;AACvB,2BAAmB,QAAQ;AAG3B,cAAM,EAAE,QAAA,IAAY,SAAA;AACpB,gBAAQ,GAAG,iCAAiC,CAAC;AAAA,MAC9C,SAAS,KAAc;AACtB,gBAAQ,MAAM,8BAA8B,GAAG;AAE/C,YAAI,eAAe,OAAO;AACzB,cAAI,IAAI,QAAQ,SAAS,WAAW,KAAK,IAAI,QAAQ,SAAS,OAAO,GAAG;AACvE,0BAAc,QAAQ,GAAG,qCAAqC;AAAA,UAC/D,OAAO;AACN,0BAAc,QAAQ,IAAI,WAAW,GAAG,qCAAqC;AAAA,UAC9E;AAAA,QACD,OAAO;AACN,wBAAc,QAAQ,GAAG,qCAAqC;AAAA,QAC/D;AAAA,MACD,UAAA;AACC,yBAAiB,QAAQ;AAAA,MAC1B;AAAA,IACD;;;;;;;AAxiBM,YAAA,OAAAL,eAAAC,WAAA,EAAA,OAAM,2CAAuC,MAAA,CAAA,CAAA,GAAA;UAEtC,QAAA,OAAO;;iBAKF,MAAA,OAAK;2FACY,MAAA,KAAK,CAAA,MAAA;;UAC3B,IAAG;AAAA,UAAI,OAAM;AAAA,QAAA;2BAAvB,CAAgG,GAAAK,QAAAC,UAAA,aAAA;;uCAAtCC,MAAA,EAAA,EAAE,oBAAA,CAAA,CAAA,EAAA;AAAA;;gDAAFA,MAAA,EAAA,EAAE,oBAAA,CAAA,GAAA,CAAA;AAAA,cAAA;AAAA;;;;;iBAI7C,KAAA,OAAI;2VAOZC,eAAA,KAAA,MAAK,SAAS,UAAU,YAAA,CAAW,4EAG0BA,eAAA,KAAA,MAAK,QAAQ,qDAC9BA,eAAA,KAAA,MAAK,KAAK;AAGjD,YAAA,KAAA,MAAK,eAAa;kbAUrBD,MAAA,EAAA,EAAE,uBAAA,CAAA,CAAA,SAAA;AAAA;iMAMFA,MAAA,EAAA,EAAE,0BAAA,CAAA,CAAA,SAAA;AAAA;;YAMF,aAAA,OAAY;kIAQfA,MAAA,EAAA,EAAE,qBAAA,CAAA,CAAA,WAAA;AAAA;;;iQAQkEA,MAAA,EAAA,EAAE,sBAAA,CAAA,qDAC3BC,eAAA,MAAA,MAAM,cAAU,CAAA,0LAGSD,MAAA,EAAA,EAAE,gCAAA,CAAA,sDAC1BC,eAAA,MAAA,MAAM,sBAAkB,CAAA,0LAGAD,MAAA,EAAA,EAAE,0BAAA,CAAA,4EACnB,WAAW,KAAA,MAAK,SAAS,CAAA,4LAMbA,MAAA,EAAA,EAAE,wBAAA,CAAA;AAC3D,YAAA,YAAA,MAAY,SAAM,GAAA;;AACRE,wBAAA,YAAA,QAAR,SAAI;;;cAIX,IAAI,KAAK,0BAA0B,KAAK,aAAa,IAAI,IAAI,KAAK,IAAI,KAAA,WAAgB,KAAA,MAAK,QAAQ,IAAI,KAAK,IAAI;AAAA,cACjH,OAAM;AAAA,YAAA;+BAFP,CAKW,GAAAJ,QAAAC,UAAA,aAAA;;AADPD,yBAAA,GAAAG,eAAA,KAAK,IAAI,CAAA,EAAA;AAAA;;oBAATE,gBAAAC,gBAAA,KAAK,IAAI,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;8EAE+CH,eAAA,KAAK,WAAW,oFAEnB,WAAW,KAAK,SAAS,CAAA;;;;iGAKlFD,MAAA,EAAA,EAAE,uBAAA,CAAA,CAAA,QAAA;AAAA;;;;;;oBAMc,UAAA;AAAA,2CAAA,UAAS,QAAA;AAAA,QAAG,OAAOA,MAAA,EAAA,EAAE,qBAAA;AAAA,QAA0B,SAAO;AAAA,MAAA;yBAA5E,CA8Fc,GAAAF,QAAAC,UAAA,aAAA;;;8SAxFNE,eAAA,SAAA,MAAS,SAAS,UAAU,aAAW,gLAMzCI,cAAA,SAAOL,MAAA,EAAA,EAAE,sBAAA,CAAA,ymBAQgDA,MAAA,EAAA,EAAE,gCAAA,CAAA;;cAMpD,YAAA,SAAA,MAAS;AAAA,cAAT,uBAAA,CAAA,WAAA,SAAA,MAAS,WAAQ;AAAA,cACzB,OAAOA,MAAA,EAAA,EAAE,kBAAA;AAAA,cACT,aAAaA,MAAA,EAAA,EAAE,+BAAA;AAAA,cACf,OAAO,OAAA,MAAO;AAAA,cACf,UAAA;AAAA,cACC,QAAM;AAAA,YAAA;cAEI,cAAX,CAEWM,IAAAR,QAAAC,UAAAQ,cAAA;;gHADkDP,MAAA,EAAA,EAAE,sBAAA,CAAA;;;oBAA9DQ,YAA6F,KAAA,EAA1F,OAAM,gDAAA,mBAAmDR,MAAA,EAAA,EAAE,sBAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;;cAQtD,YAAA,SAAA,MAAS;AAAA,cAAT,uBAAA,CAAA,WAAA,SAAA,MAAS,QAAK;AAAA,cACvB,MAAK;AAAA,cACJ,OAAOA,MAAA,EAAA,EAAE,eAAA;AAAA,cACT,aAAaA,MAAA,EAAA,EAAE,4BAAA;AAAA,cACf,OAAO,OAAA,MAAO;AAAA,cACf,UAAA;AAAA,cACC,QAAM;AAAA,YAAA;AAEG,gBAAA,SAAA,MAAS,YAAU,UAAA,UAAA,mBAAM,QAAK;;;gBAC3B,SAAQ;AAAA,gBAAU,MAAK;AAAA,cAAA;iCAApC,CAKcM,IAAAR,QAAAC,UAAAQ,cAAA;;wUADVP,MAAA,EAAA,EAAE,4BAAA,CAAA;;;oCAHLS,YAEM,OAAA;AAAA,wBAFD,OAAM;AAAA,wBAAe,MAAK;AAAA,wBAAe,SAAQ;AAAA,sBAAA;wBACrDD,YAA0L,QAAA;AAAA,0BAApL,aAAU;AAAA,0BAAU,GAAE;AAAA,0BAAmI,aAAU;AAAA,wBAAA;;sBACpKL,gBAAA,sBACHH,MAAA,EAAA,EAAE,4BAAA,CAAA,GAAA,CAAA;AAAA,oBAAA;AAAA;;;;;;;;iQAYHA,MAAA,EAAA,EAAE,wBAAA,CAAA;gBAKI,YAAA,OAAW;kNACgC,YAAA,KAAW;;;;;;cAM/D,MAAK;AAAA,cACL,SAAQ;AAAA,cACP,SAAO;AAAA,YAAA;+BAHT,CAMeM,IAAAR,QAAAC,UAAAQ,cAAA;;2CADXP,MAAA,EAAA,EAAE,eAAA,CAAA,CAAA,EAAA;AAAA;;oDAAFA,MAAA,EAAA,EAAE,eAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;cAGL,MAAK;AAAA,cACJ,SAAS,SAAA;AAAA,cACT,UAAQ,CAAG,YAAA,SAAe,SAAA;AAAA,YAAA;+BAH5B,CAMeM,IAAAR,QAAAC,UAAAQ,cAAA;;2CADXP,MAAA,EAAA,EAAE,gBAAA,CAAA,CAAA,EAAA;AAAA;;oDAAFA,MAAA,EAAA,EAAE,gBAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;;;cAzFRQ,YA4FO,QAAA;AAAA,gBA5FA,wBAAgB,eAAa,CAAA,SAAA,CAAA;AAAA,gBAAE,OAAM;AAAA,cAAA;gBAE3CA,YAkBM,OAAA,EAlBD,OAAM,qCAAiC;AAAA,kBAC3CA,YAeM,OAAA,EAfD,OAAM,cAAU;AAAA,oBACpBA,YAEM,OAAA,EAFD,OAAM,sIAAA,GAAqIJ,gBAC5I,SAAA,MAAS,SAAS,OAAM,CAAA,EAAI,YAAA,CAAW,GAAA,CAAA;AAAA,oBAE3CI,YAUS,UAAA;AAAA,sBATR,MAAK;AAAA,sBACL,OAAM;AAAA,sBACL,qBAAO,iBAAA,QAAgB;AAAA,sBACvB,OAAOR,MAAA,EAAA,EAAE,sBAAA;AAAA,oBAAA;oCAEVS,YAGM,OAAA;AAAA,wBAHD,OAAM;AAAA,wBAA2C,MAAK;AAAA,wBAAO,QAAO;AAAA,wBAAe,SAAQ;AAAA,sBAAA;wBAC/FD,YAAkP,QAAA;AAAA,0BAA5O,kBAAe;AAAA,0BAAQ,mBAAgB;AAAA,0BAAQ,gBAAa;AAAA,0BAAI,GAAE;AAAA,wBAAA;wBACxEA,YAAkH,QAAA;AAAA,0BAA5G,kBAAe;AAAA,0BAAQ,mBAAgB;AAAA,0BAAQ,gBAAa;AAAA,0BAAI,GAAE;AAAA,wBAAA;;;;kBAI3EA,YAAuG,KAAA,EAApG,OAAM,gDAAA,mBAAmDR,MAAA,EAAA,EAAE,gCAAA,CAAA,GAAA,CAAA;AAAA,gBAAA;gBAI/DQ,YAaM,OAAA,MAAA;AAAA,kBAZLA,YAWc,wBAAA;AAAA,oBAVJ,YAAA,SAAA,MAAS;AAAA,oBAAT,uBAAA,CAAA,WAAA,SAAA,MAAS,WAAQ;AAAA,oBACzB,OAAOR,MAAA,EAAA,EAAE,kBAAA;AAAA,oBACT,aAAaA,MAAA,EAAA,EAAE,+BAAA;AAAA,oBACf,OAAO,OAAA,MAAO;AAAA,oBACf,UAAA;AAAA,oBACC,QAAM;AAAA,kBAAA;oBAEI,cACV,MAA6F;AAAA,sBAA7FQ,YAA6F,KAAA,EAA1F,OAAM,gDAAA,mBAAmDR,MAAA,EAAA,EAAE,sBAAA,CAAA,GAAA,CAAA;AAAA,oBAAA;;;;gBAMjEQ,YAkBM,OAAA,MAAA;AAAA,kBAjBLA,YAQE,wBAAA;AAAA,oBAPQ,YAAA,SAAA,MAAS;AAAA,oBAAT,uBAAA,CAAA,WAAA,SAAA,MAAS,QAAK;AAAA,oBACvB,MAAK;AAAA,oBACJ,OAAOR,MAAA,EAAA,EAAE,eAAA;AAAA,oBACT,aAAaA,MAAA,EAAA,EAAE,4BAAA;AAAA,oBACf,OAAO,OAAA,MAAO;AAAA,oBACf,UAAA;AAAA,oBACC,QAAM;AAAA,kBAAA;kBAEG,SAAA,MAAS,YAAU,UAAA,UAAA,mBAAM,uBAApCS,YAOM,OAAA;AAAA;oBAPqC,OAAM;AAAA,kBAAA;oBAChDD,YAKc,wBAAA;AAAA,sBALD,SAAQ;AAAA,sBAAU,MAAK;AAAA,oBAAA;uCACnC,MAEM;AAAA,sCAFNC,YAEM,OAAA;AAAA,0BAFD,OAAM;AAAA,0BAAe,MAAK;AAAA,0BAAe,SAAQ;AAAA,wBAAA;0BACrDD,YAA0L,QAAA;AAAA,4BAApL,aAAU;AAAA,4BAAU,GAAE;AAAA,4BAAmI,aAAU;AAAA,0BAAA;;wBACpKL,gBAAA,sBACHH,MAAA,EAAA,EAAE,4BAAA,CAAA,GAAA,CAAA;AAAA,sBAAA;;;;;gBAMRQ,YAQM,OAAA,EARD,OAAM,wDAAoD;AAAA,kBAC9DA,YAMS,UAAA;AAAA,oBALR,MAAK;AAAA,oBACJ,qBAAO,mBAAA,QAAkB;AAAA,oBAC1B,OAAM;AAAA,kBAAA,mBAEHR,MAAA,EAAA,EAAE,wBAAA,CAAA,GAAA,GAAA,CAAA,SAAA,CAAA;AAAA,gBAAA;gBAKI,YAAA,sBAAXS,YAEM,OAAA;AAAA;kBAFkB,OAAM;AAAA,gBAAA;kBAC7BD,YAAuE,KAAA,EAApE,OAAM,yCAAA,mBAA4C,YAAA,KAAW,GAAA,CAAA;AAAA,gBAAA;gBAIjEA,YAeM,OAAA,EAfD,OAAM,qCAAiC;AAAA,kBAC3CA,YAMe,yBAAA;AAAA,oBALd,MAAK;AAAA,oBACL,SAAQ;AAAA,oBACP,SAAO;AAAA,kBAAA;qCAER,MAAyB;AAAA,sDAAtBR,MAAA,EAAA,EAAE,eAAA,CAAA,GAAA,CAAA;AAAA,oBAAA;;;kBAENQ,YAMe,yBAAA;AAAA,oBALd,MAAK;AAAA,oBACJ,SAAS,SAAA;AAAA,oBACT,UAAQ,CAAG,YAAA,SAAe,SAAA;AAAA,kBAAA;qCAE3B,MAA0B;AAAA,sDAAvBR,MAAA,EAAA,EAAE,gBAAA,CAAA,GAAA,CAAA;AAAA,oBAAA;;;;;;;;;;;oBAOa,mBAAA;AAAA,2CAAA,mBAAkB,QAAA;AAAA,QAAG,OAAOA,MAAA,EAAA,EAAE,wBAAA;AAAA,QAA6B,qBAAO,mBAAA,QAAkB;AAAA,MAAA;yBAA1G,CAsDc,GAAAF,QAAAC,UAAA,aAAA;;;;cAnDF,YAAA,aAAA,MAAa;AAAA,cAAb,uBAAA,CAAA,WAAA,aAAA,MAAa,kBAAe;AAAA,cACrC,MAAK;AAAA,cACJ,OAAOC,MAAA,EAAA,EAAE,yBAAA;AAAA,cACT,aAAaA,MAAA,EAAA,EAAE,sCAAA;AAAA,cACf,OAAO,eAAA,MAAe;AAAA,cACvB,UAAA;AAAA,YAAA;;cAGS,YAAA,aAAA,MAAa;AAAA,cAAb,uBAAA,CAAA,WAAA,aAAA,MAAa,cAAW;AAAA,cACjC,MAAK;AAAA,cACJ,OAAOA,MAAA,EAAA,EAAE,qBAAA;AAAA,cACT,aAAaA,MAAA,EAAA,EAAE,kCAAA;AAAA,cACf,OAAO,eAAA,MAAe;AAAA,cACvB,UAAA;AAAA,cACC,QAAM;AAAA,YAAA;cAEI,cAAX,CAEWM,IAAAR,QAAAC,UAAAQ,cAAA;;gHADkDP,MAAA,EAAA,EAAE,sBAAA,CAAA;;;oBAA9DQ,YAA6F,KAAA,EAA1F,OAAM,gDAAA,mBAAmDR,MAAA,EAAA,EAAE,sBAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;cAItD,YAAA,aAAA,MAAa;AAAA,cAAb,uBAAA,CAAA,WAAA,aAAA,MAAa,kBAAe;AAAA,cACrC,MAAK;AAAA,cACJ,OAAOA,MAAA,EAAA,EAAE,4BAAA;AAAA,cACT,aAAaA,MAAA,EAAA,EAAE,yCAAA;AAAA,cACf,OAAO,eAAA,MAAe;AAAA,cACvB,UAAA;AAAA,cACC,QAAM;AAAA,YAAA;gBAGG,cAAA,OAAa;kNAC8B,cAAA,KAAa;;;;;;cAKjE,MAAK;AAAA,cACL,SAAQ;AAAA,cACP,qBAAO,mBAAA,QAAkB;AAAA,YAAA;+BAH3B,CAMeM,IAAAR,QAAAC,UAAAQ,cAAA;;2CADXP,MAAA,EAAA,EAAE,eAAA,CAAA,CAAA,EAAA;AAAA;;oDAAFA,MAAA,EAAA,EAAE,eAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;cAGL,MAAK;AAAA,cACJ,SAAS,iBAAA;AAAA,cACT,UAAQ,CAAG,oBAAA,SAAuB,iBAAA;AAAA,YAAA;+BAHpC,CAMeM,IAAAR,QAAAC,UAAAQ,cAAA;;2CADXP,MAAA,EAAA,EAAE,gBAAA,CAAA,CAAA,EAAA;AAAA;;oDAAFA,MAAA,EAAA,EAAE,gBAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;AAAA;;;;;;;cAjDRQ,YAoDO,QAAA;AAAA,gBApDA,wBAAgB,gBAAc,CAAA,SAAA,CAAA;AAAA,gBAAE,OAAM;AAAA,cAAA;gBAC5CA,YAOE,wBAAA;AAAA,kBANQ,YAAA,aAAA,MAAa;AAAA,kBAAb,uBAAA,CAAA,WAAA,aAAA,MAAa,kBAAe;AAAA,kBACrC,MAAK;AAAA,kBACJ,OAAOR,MAAA,EAAA,EAAE,yBAAA;AAAA,kBACT,aAAaA,MAAA,EAAA,EAAE,sCAAA;AAAA,kBACf,OAAO,eAAA,MAAe;AAAA,kBACvB,UAAA;AAAA,gBAAA;gBAEDQ,YAYc,wBAAA;AAAA,kBAXJ,YAAA,aAAA,MAAa;AAAA,kBAAb,uBAAA,CAAA,WAAA,aAAA,MAAa,cAAW;AAAA,kBACjC,MAAK;AAAA,kBACJ,OAAOR,MAAA,EAAA,EAAE,qBAAA;AAAA,kBACT,aAAaA,MAAA,EAAA,EAAE,kCAAA;AAAA,kBACf,OAAO,eAAA,MAAe;AAAA,kBACvB,UAAA;AAAA,kBACC,QAAM;AAAA,gBAAA;kBAEI,cACV,MAA6F;AAAA,oBAA7FQ,YAA6F,KAAA,EAA1F,OAAM,gDAAA,mBAAmDR,MAAA,EAAA,EAAE,sBAAA,CAAA,GAAA,CAAA;AAAA,kBAAA;;;gBAGhEQ,YAQE,wBAAA;AAAA,kBAPQ,YAAA,aAAA,MAAa;AAAA,kBAAb,uBAAA,CAAA,WAAA,aAAA,MAAa,kBAAe;AAAA,kBACrC,MAAK;AAAA,kBACJ,OAAOR,MAAA,EAAA,EAAE,4BAAA;AAAA,kBACT,aAAaA,MAAA,EAAA,EAAE,yCAAA;AAAA,kBACf,OAAO,eAAA,MAAe;AAAA,kBACvB,UAAA;AAAA,kBACC,QAAM;AAAA,gBAAA;gBAGG,cAAA,sBAAXS,YAEM,OAAA;AAAA;kBAFoB,OAAM;AAAA,gBAAA;kBAC/BD,YAAyE,KAAA,EAAtE,OAAM,yCAAA,mBAA4C,cAAA,KAAa,GAAA,CAAA;AAAA,gBAAA;gBAGnEA,YAeM,OAAA,EAfD,OAAM,qCAAiC;AAAA,kBAC3CA,YAMe,yBAAA;AAAA,oBALd,MAAK;AAAA,oBACL,SAAQ;AAAA,oBACP,qBAAO,mBAAA,QAAkB;AAAA,kBAAA;qCAE1B,MAAyB;AAAA,sDAAtBR,MAAA,EAAA,EAAE,eAAA,CAAA,GAAA,CAAA;AAAA,oBAAA;;;kBAENQ,YAMe,yBAAA;AAAA,oBALd,MAAK;AAAA,oBACJ,SAAS,iBAAA;AAAA,oBACT,UAAQ,CAAG,oBAAA,SAAuB,iBAAA;AAAA,kBAAA;qCAEnC,MAA0B;AAAA,sDAAvBR,MAAA,EAAA,EAAE,gBAAA,CAAA,GAAA,CAAA;AAAA,oBAAA;;;;;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","$slots","icon","dot","closable","_push","_parent","_unref","_ssrInterpolate","_ssrRenderList","_createTextVNode","_toDisplayString","_ssrRenderAttr","_","_scopeId","_createVNode","_createBlock"],"sources":["../../../../components/common/Badge.vue","../../../../pages/profile/[username].vue"],"sourcesContent":["<template>\n  <span :class=\"badgeClasses\">\n    <span v-if=\"$slots.icon || icon || dot\" class=\"badge-icon\">\n      <span v-if=\"dot\" class=\"badge-dot\" />\n      <slot v-else name=\"icon\">\n        <component :is=\"icon\" v-if=\"icon\" />\n      </slot>\n    </span>\n    <slot />\n    <button\n      v-if=\"closable\"\n      type=\"button\"\n      @click=\"$emit('close')\"\n      class=\"badge-close\"\n    >\n      <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n      </svg>\n    </button>\n  </span>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\ninterface Props {\n\tvariant?: \"primary\" | \"success\" | \"warning\" | \"danger\" | \"info\" | \"gray\";\n\tsize?: \"xs\" | \"sm\" | \"md\" | \"lg\";\n\trounded?: \"md\" | \"lg\" | \"full\";\n\tclosable?: boolean;\n\ticon?: string;\n\tdot?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n\tvariant: \"gray\",\n\tsize: \"sm\",\n\trounded: \"full\",\n\tclosable: false,\n\tdot: false,\n});\n\ndefineEmits<{\n\tclose: [];\n}>();\n\nconst badgeClasses = computed(() => {\n\tconst base = \"badge inline-flex items-center font-medium transition-all duration-200\";\n\n\tconst variants = {\n\t\tprimary: \"badge-primary\",\n\t\tsuccess: \"badge-success\",\n\t\twarning: \"badge-warning\",\n\t\tdanger: \"badge-danger\",\n\t\tinfo: \"badge-info\",\n\t\tgray: \"badge-gray\",\n\t};\n\n\tconst sizes = {\n\t\txs: \"text-xs px-2 py-0.5\",\n\t\tsm: \"text-xs px-2.5 py-0.5\",\n\t\tmd: \"text-sm px-3 py-1\",\n\t\tlg: \"text-base px-4 py-1.5\",\n\t};\n\n\tconst roundedStyles = {\n\t\tmd: \"rounded-md\",\n\t\tlg: \"rounded-lg\",\n\t\tfull: \"rounded-full\",\n\t};\n\n\treturn [base, variants[props.variant], sizes[props.size], roundedStyles[props.rounded]].join(\" \");\n});\n</script>\n\n<style scoped>\n.badge-icon {\n  @apply -ml-0.5 mr-1.5 flex items-center;\n}\n\n.badge-dot {\n  @apply w-2 h-2 rounded-full bg-current;\n}\n\n.badge-close {\n  @apply -mr-0.5 ml-1.5 inline-flex items-center justify-center rounded-full p-0.5 hover:bg-black/10 dark:hover:bg-white/10 transition-colors;\n}\n\n.badge .badge-icon svg {\n  @apply w-3.5 h-3.5;\n}\n\n.badge.text-xs .badge-icon svg {\n  @apply w-3 h-3;\n}\n\n.badge.text-base .badge-icon svg {\n  @apply w-4 h-4;\n}\n</style>","<template>\n\t<div class=\"container mx-auto max-w-4xl px-4 py-8\">\n\t\t<!-- ローディング状態 -->\n\t\t<div v-if=\"loading\" class=\"flex justify-center items-center min-h-[400px]\">\n\t\t\t<div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n\t\t</div>\n\n\t\t<!-- エラー状態 -->\n\t\t<div v-else-if=\"error\" class=\"text-center py-8\">\n\t\t\t<p class=\"text-red-600 mb-4\">{{ error }}</p>\n\t\t\t<NuxtLink to=\"/\" class=\"text-blue-600 hover:underline\">{{ $t('profile.backToHome') }}</NuxtLink>\n\t\t</div>\n\n\t\t<!-- プロフィール表示 -->\n\t\t<div v-else-if=\"user\">\n\t\t\t<!-- ヘッダー部分 -->\n\t\t\t<div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6 mb-6\">\n\t\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t\t<div class=\"flex items-center space-x-4\">\n\t\t\t\t\t\t<!-- アバター -->\n\t\t\t\t\t\t<div class=\"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold\">\n\t\t\t\t\t\t\t{{ user.username.charAt(0).toUpperCase() }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h1 class=\"text-2xl font-bold text-gray-900 dark:text-white\">{{ user.username }}</h1>\n\t\t\t\t\t\t\t<p class=\"text-gray-600 dark:text-gray-400\">{{ user.email }}</p>\n\t\t\t\t\t\t\t<div class=\"flex items-center mt-2\">\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-if=\"user.emailVerified\"\n\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{ $t('profile.emailVerified') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t\tclass=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $t('profile.emailNotVerified') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"isOwnProfile\"\n\t\t\t\t\t\t@click=\"() => {\n\t\t\t\t\t\t\tconsole.log('Edit button clicked');\n\t\t\t\t\t\t\terrors.value = {};\n\t\t\t\t\t\t\tisEditing = true;\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tclass=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $t('profile.editProfile') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- 統計情報 -->\n\t\t\t<div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n\t\t\t\t<div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6\">\n\t\t\t\t\t<h3 class=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">{{ $t('profile.createdRules') }}</h3>\n\t\t\t\t\t<p class=\"text-3xl font-bold text-blue-600\">{{ stats.rulesCount || 0 }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6\">\n\t\t\t\t\t<h3 class=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">{{ $t('profile.belongingOrganizations') }}</h3>\n\t\t\t\t\t<p class=\"text-3xl font-bold text-green-600\">{{ stats.organizationsCount || 0 }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6\">\n\t\t\t\t\t<h3 class=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">{{ $t('profile.registrationDate') }}</h3>\n\t\t\t\t\t<p class=\"text-lg text-gray-600 dark:text-gray-400\">{{ formatDate(user.createdAt) }}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- 最近のアクティビティ -->\n\t\t\t<div class=\"bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6\">\n\t\t\t\t<h2 class=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">{{ $t('profile.recentActivity') }}</h2>\n\t\t\t\t<div v-if=\"recentRules.length > 0\" class=\"space-y-4\">\n\t\t\t\t\t<div v-for=\"rule in recentRules\" :key=\"rule.id\" class=\"border-b border-gray-200 dark:border-gray-700 pb-4 last:border-0\">\n\t\t\t\t\t\t<div class=\"flex justify-between items-start\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<NuxtLink\n\t\t\t\t\t\t\t\t\t:to=\"rule.organization ? `/rules/@${rule.organization.name}/${rule.name}` : `/rules/@${user.username}/${rule.name}`\"\n\t\t\t\t\t\t\t\t\tclass=\"text-lg font-medium text-blue-600 hover:underline\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ rule.name }}\n\t\t\t\t\t\t\t\t</NuxtLink>\n\t\t\t\t\t\t\t\t<p class=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{{ rule.description }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span class=\"text-sm text-gray-500 dark:text-gray-500\">{{ formatDate(rule.updatedAt) }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"text-gray-500 dark:text-gray-400 text-center py-8\">\n\t\t\t\t\t{{ $t('profile.noActivityYet') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- プロフィール編集モーダル -->\n\t\t<CommonModal v-model=\"isEditing\" :title=\"$t('profile.editProfile')\" @close=\"cancelEdit\">\n\t\t\t<form @submit.prevent=\"updateProfile\" class=\"space-y-4\">\n\t\t\t\t<!-- アバター編集セクション -->\n\t\t\t\t<div class=\"flex flex-col items-center mb-6\">\n\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t<div class=\"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold\">\n\t\t\t\t\t\t\t{{ editForm.username.charAt(0).toUpperCase() }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclass=\"absolute bottom-0 right-0 p-2 bg-white dark:bg-gray-700 rounded-full shadow-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors\"\n\t\t\t\t\t\t\t@click=\"showAvatarUpload = true\"\n\t\t\t\t\t\t\t:title=\"$t('profile.changeAvatar')\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"w-4 h-4 text-gray-600 dark:text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\"></path>\n\t\t\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">{{ $t('profile.avatarChangeComingSoon') }}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- ユーザー名 -->\n\t\t\t\t<div>\n\t\t\t\t\t<CommonInput\n\t\t\t\t\t\tv-model=\"editForm.username\"\n\t\t\t\t\t\t:label=\"$t('profile.username')\"\n\t\t\t\t\t\t:placeholder=\"$t('profile.placeholders.username')\"\n\t\t\t\t\t\t:error=\"errors.username\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\t@blur=\"validateUsername\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<template #hint>\n\t\t\t\t\t\t\t<p class=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{{ $t('profile.usernameHint') }}</p>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</CommonInput>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- メールアドレス -->\n\t\t\t\t<div>\n\t\t\t\t\t<CommonInput\n\t\t\t\t\t\tv-model=\"editForm.email\"\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t:label=\"$t('profile.email')\"\n\t\t\t\t\t\t:placeholder=\"$t('profile.placeholders.email')\"\n\t\t\t\t\t\t:error=\"errors.email\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\t@blur=\"validateEmail\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div v-if=\"editForm.email !== user?.email\" class=\"mt-2\">\n\t\t\t\t\t\t<CommonBadge variant=\"warning\" size=\"sm\">\n\t\t\t\t\t\t\t<svg class=\"w-3 h-3 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n\t\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t{{ $t('profile.emailChangeWarning') }}\n\t\t\t\t\t\t</CommonBadge>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- パスワード変更リンク -->\n\t\t\t\t<div class=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t@click=\"showPasswordChange = true\"\n\t\t\t\t\t\tclass=\"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $t('profile.changePassword') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- エラーメッセージ -->\n\t\t\t\t<div v-if=\"updateError\" class=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md\">\n\t\t\t\t\t<p class=\"text-sm text-red-600 dark:text-red-400\">{{ updateError }}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- ボタン -->\n\t\t\t\t<div class=\"flex justify-end space-x-3 pt-4\">\n\t\t\t\t\t<CommonButton\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t@click=\"cancelEdit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $t('common.cancel') }}\n\t\t\t\t\t</CommonButton>\n\t\t\t\t\t<CommonButton\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:loading=\"updating\"\n\t\t\t\t\t\t:disabled=\"!isFormValid || updating\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $t('profile.update') }}\n\t\t\t\t\t</CommonButton>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</CommonModal>\n\n\t\t<!-- パスワード変更モーダル -->\n\t\t<CommonModal v-model=\"showPasswordChange\" :title=\"$t('profile.changePassword')\" @close=\"showPasswordChange = false\">\n\t\t\t<form @submit.prevent=\"changePassword\" class=\"space-y-4\">\n\t\t\t\t<CommonInput\n\t\t\t\t\tv-model=\"passwordForm.currentPassword\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:label=\"$t('profile.currentPassword')\"\n\t\t\t\t\t:placeholder=\"$t('profile.placeholders.currentPassword')\"\n\t\t\t\t\t:error=\"passwordErrors.currentPassword\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<CommonInput\n\t\t\t\t\tv-model=\"passwordForm.newPassword\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:label=\"$t('profile.newPassword')\"\n\t\t\t\t\t:placeholder=\"$t('profile.placeholders.newPassword')\"\n\t\t\t\t\t:error=\"passwordErrors.newPassword\"\n\t\t\t\t\trequired\n\t\t\t\t\t@blur=\"validateNewPassword\"\n\t\t\t\t>\n\t\t\t\t\t<template #hint>\n\t\t\t\t\t\t<p class=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">{{ $t('profile.passwordHint') }}</p>\n\t\t\t\t\t</template>\n\t\t\t\t</CommonInput>\n\t\t\t\t<CommonInput\n\t\t\t\t\tv-model=\"passwordForm.confirmPassword\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t:label=\"$t('profile.newPasswordConfirm')\"\n\t\t\t\t\t:placeholder=\"$t('profile.placeholders.newPasswordConfirm')\"\n\t\t\t\t\t:error=\"passwordErrors.confirmPassword\"\n\t\t\t\t\trequired\n\t\t\t\t\t@blur=\"validatePasswordConfirm\"\n\t\t\t\t/>\n\n\t\t\t\t<div v-if=\"passwordError\" class=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md\">\n\t\t\t\t\t<p class=\"text-sm text-red-600 dark:text-red-400\">{{ passwordError }}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"flex justify-end space-x-3 pt-4\">\n\t\t\t\t\t<CommonButton\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t@click=\"showPasswordChange = false\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $t('common.cancel') }}\n\t\t\t\t\t</CommonButton>\n\t\t\t\t\t<CommonButton\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t:loading=\"changingPassword\"\n\t\t\t\t\t\t:disabled=\"!isPasswordFormValid || changingPassword\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $t('profile.change') }}\n\t\t\t\t\t</CommonButton>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</CommonModal>\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { useToast } from \"~/composables/useToast\";\nimport { useAuthStore } from \"~/stores/auth\";\n\nconst route = useRoute();\nconst { $rpc, $t } = useNuxtApp();\nconst authStore = useAuthStore();\nconst { user: currentUser } = storeToRefs(authStore);\n\n// Type definitions\ninterface UserProfile {\n\tid: string;\n\temail: string;\n\tusername: string;\n\temailVerified: boolean;\n\tcreatedAt: number;\n\tupdatedAt: number;\n}\n\ninterface Rule {\n\tid: string;\n\tname: string;\n\tdescription: string;\n\tvisibility: string;\n\tcreatedAt: number;\n\tupdatedAt: number;\n\torganization?: {\n\t\tname: string;\n\t} | null;\n}\n\n// State\nconst loading = ref(true);\nconst error = ref<string | null>(null);\nconst user = ref<UserProfile | null>(null);\nconst stats = ref({\n\trulesCount: 0,\n\torganizationsCount: 0,\n});\nconst recentRules = ref<Rule[]>([]);\nconst isEditing = ref(false);\nconst updating = ref(false);\nconst updateError = ref<string | null>(null);\nconst editForm = ref({\n\tusername: \"\",\n\temail: \"\",\n});\nconst errors = ref<Record<string, string>>({});\n\n// Password change state\nconst showPasswordChange = ref(false);\nconst changingPassword = ref(false);\nconst passwordError = ref<string | null>(null);\nconst passwordForm = ref({\n\tcurrentPassword: \"\",\n\tnewPassword: \"\",\n\tconfirmPassword: \"\",\n});\nconst passwordErrors = ref<Record<string, string>>({});\n\n// Avatar upload state\nconst showAvatarUpload = ref(false);\n\n// Computed\nconst isOwnProfile = computed(() => {\n\treturn currentUser.value?.id === user.value?.id;\n});\n\nconst isFormValid = computed(() => {\n\tconst hasUsername = editForm.value.username.trim().length > 0;\n\tconst hasEmail = editForm.value.email.trim().length > 0;\n\tconst hasNoErrors = !errors.value.username && !errors.value.email;\n\treturn hasUsername && hasEmail && hasNoErrors;\n});\n\nconst isPasswordFormValid = computed(() => {\n\treturn (\n\t\tpasswordForm.value.currentPassword.length > 0 &&\n\t\tpasswordForm.value.newPassword.length >= 8 &&\n\t\tpasswordForm.value.confirmPassword.length > 0 &&\n\t\tObject.keys(passwordErrors.value).length === 0\n\t);\n});\n\n// Methods\nconst formatDate = (timestamp: number) => {\n\tconst date = new Date(timestamp * 1000);\n\treturn date.toLocaleDateString(\"ja-JP\", {\n\t\tyear: \"numeric\",\n\t\tmonth: \"long\",\n\t\tday: \"numeric\",\n\t});\n};\n\nconst loadProfile = async () => {\n\ttry {\n\t\tloading.value = true;\n\t\terror.value = null;\n\n\t\t// Get username from route or use current user\n\t\tconst username = (route.params.username as string) || currentUser.value?.username;\n\n\t\tif (!username) {\n\t\t\terror.value = $t(\"profile.errors.noUsername\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Load user profile\n\t\tconst profileData = await $rpc.users.getProfile({\n\t\t\tusername,\n\t\t});\n\n\t\tuser.value = profileData.user;\n\t\tstats.value = profileData.stats;\n\t\trecentRules.value = profileData.recentRules || [];\n\n\t\t// Set edit form initial values\n\t\tif (isOwnProfile.value && user.value) {\n\t\t\teditForm.value = {\n\t\t\t\tusername: user.value.username,\n\t\t\t\temail: user.value.email,\n\t\t\t};\n\t\t\t// Clear any previous errors\n\t\t\terrors.value = {};\n\t\t}\n\t} catch (err: unknown) {\n\t\tconsole.error(\"Failed to load profile:\", err);\n\t\terror.value = err instanceof Error ? err.message : $t(\"profile.errors.loadFailed\");\n\t} finally {\n\t\tloading.value = false;\n\t}\n};\n\n// Validation methods\nconst validateUsername = () => {\n\terrors.value.username = \"\";\n\tconst username = editForm.value.username.trim();\n\n\tif (!username) {\n\t\terrors.value.username = $t(\"profile.errors.usernameRequired\");\n\t} else if (!/^[a-zA-Z0-9_-]+$/.test(username)) {\n\t\terrors.value.username = $t(\"profile.errors.usernameInvalid\");\n\t} else if (username.length < 3) {\n\t\terrors.value.username = $t(\"profile.errors.usernameMinLength\");\n\t}\n};\n\nconst validateEmail = () => {\n\terrors.value.email = \"\";\n\tconst email = editForm.value.email.trim();\n\n\tif (!email) {\n\t\terrors.value.email = $t(\"profile.errors.emailRequired\");\n\t} else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n\t\terrors.value.email = $t(\"profile.errors.emailInvalid\");\n\t}\n};\n\nconst validateNewPassword = () => {\n\tpasswordErrors.value.newPassword = \"\";\n\tif (passwordForm.value.newPassword.length < 8) {\n\t\tpasswordErrors.value.newPassword = $t(\"profile.errors.passwordMinLength\");\n\t}\n};\n\nconst validatePasswordConfirm = () => {\n\tpasswordErrors.value.confirmPassword = \"\";\n\tif (passwordForm.value.newPassword !== passwordForm.value.confirmPassword) {\n\t\tpasswordErrors.value.confirmPassword = $t(\"profile.errors.passwordMismatch\");\n\t}\n};\n\nconst updateProfile = async () => {\n\tconsole.log(\"updateProfile called\");\n\tconsole.log(\"isFormValid:\", isFormValid.value);\n\tconsole.log(\"editForm:\", editForm.value);\n\tconsole.log(\"errors:\", errors.value);\n\n\ttry {\n\t\tupdating.value = true;\n\t\tupdateError.value = null;\n\n\t\t// Validate before submitting\n\t\tvalidateUsername();\n\t\tvalidateEmail();\n\n\t\tif (!isFormValid.value) {\n\t\t\tconsole.log(\"Form is invalid, returning\");\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\"Calling API with:\", {\n\t\t\tusername: editForm.value.username.trim(),\n\t\t\temail: editForm.value.email.trim(),\n\t\t});\n\n\t\tconst result = await $rpc.users.updateProfile({\n\t\t\tusername: editForm.value.username.trim(),\n\t\t\temail: editForm.value.email.trim(),\n\t\t});\n\n\t\tconsole.log(\"API response:\", result);\n\n\t\t// Update local state\n\t\tuser.value = result.user;\n\t\tisEditing.value = false;\n\n\t\t// Update auth store if updating own profile\n\t\tif (isOwnProfile.value) {\n\t\t\tawait authStore.updateUser(result.user);\n\t\t}\n\n\t\t// Show success message\n\t\tconst { success } = useToast();\n\t\tsuccess($t(\"profile.success.profileUpdated\"));\n\t} catch (err: unknown) {\n\t\tconsole.error(\"Failed to update profile:\", err);\n\n\t\tif (err instanceof Error) {\n\t\t\tif (err.message.includes(\"already in use\")) {\n\t\t\t\tupdateError.value = $t(\"profile.errors.usernameOrEmailTaken\");\n\t\t\t} else {\n\t\t\t\tupdateError.value = err.message || $t(\"profile.errors.updateFailed\");\n\t\t\t}\n\t\t} else {\n\t\t\tupdateError.value = $t(\"profile.errors.updateFailed\");\n\t\t}\n\t} finally {\n\t\tupdating.value = false;\n\t}\n};\n\nconst cancelEdit = () => {\n\tisEditing.value = false;\n\tupdateError.value = null;\n\terrors.value = {};\n\t// Reset form to original values\n\tif (user.value) {\n\t\teditForm.value = {\n\t\t\tusername: user.value.username,\n\t\t\temail: user.value.email,\n\t\t};\n\t}\n\tconsole.log(\"cancelEdit - errors cleared:\", errors.value);\n};\n\nconst changePassword = async () => {\n\ttry {\n\t\tchangingPassword.value = true;\n\t\tpasswordError.value = null;\n\n\t\t// Validate all fields\n\t\tvalidateNewPassword();\n\t\tvalidatePasswordConfirm();\n\n\t\tif (!isPasswordFormValid.value) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait $rpc.users.changePassword({\n\t\t\tcurrentPassword: passwordForm.value.currentPassword,\n\t\t\tnewPassword: passwordForm.value.newPassword,\n\t\t});\n\n\t\t// Reset form and close modal\n\t\tpasswordForm.value = {\n\t\t\tcurrentPassword: \"\",\n\t\t\tnewPassword: \"\",\n\t\t\tconfirmPassword: \"\",\n\t\t};\n\t\tpasswordErrors.value = {};\n\t\tshowPasswordChange.value = false;\n\n\t\t// Show success message\n\t\tconst { success } = useToast();\n\t\tsuccess($t(\"profile.success.passwordChanged\"));\n\t} catch (err: unknown) {\n\t\tconsole.error(\"Failed to change password:\", err);\n\n\t\tif (err instanceof Error) {\n\t\t\tif (err.message.includes(\"incorrect\") || err.message.includes(\"wrong\")) {\n\t\t\t\tpasswordError.value = $t(\"profile.errors.wrongCurrentPassword\");\n\t\t\t} else {\n\t\t\t\tpasswordError.value = err.message || $t(\"profile.errors.passwordChangeFailed\");\n\t\t\t}\n\t\t} else {\n\t\t\tpasswordError.value = $t(\"profile.errors.passwordChangeFailed\");\n\t\t}\n\t} finally {\n\t\tchangingPassword.value = false;\n\t}\n};\n\n// Lifecycle\nonMounted(() => {\n\tloadProfile();\n});\n</script>"],"version":3}