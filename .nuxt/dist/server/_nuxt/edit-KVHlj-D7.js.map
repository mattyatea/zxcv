{"version":3,"file":"edit-KVHlj-D7.js","sources":["../../../../components/common/Textarea.vue","../../../../components/common/TagInput.vue","../../../../pages/rules/@[owner]/[name]/edit.vue"],"sourcesContent":["<template>\n  <div>\n    <label v-if=\"label\" :for=\"id\" class=\"label\">\n      {{ label }}\n      <span v-if=\"required\" class=\"text-danger\">*</span>\n    </label>\n    <div class=\"relative\">\n      <textarea\n        :id=\"id\"\n        :value=\"modelValue\"\n        :placeholder=\"placeholder\"\n        :rows=\"rows\"\n        :disabled=\"disabled\"\n        :required=\"required\"\n        :class=\"textareaClasses\"\n        @input=\"$emit('update:modelValue', ($event.target as HTMLTextAreaElement).value)\"\n        @blur=\"$emit('blur')\"\n        @focus=\"$emit('focus')\"\n      />\n    </div>\n    <p v-if=\"error\" class=\"error-message\">{{ error }}</p>\n    <p v-if=\"hint && !error\" class=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{{ hint }}</p>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\ninterface Props {\n\tmodelValue: string;\n\tlabel?: string;\n\tplaceholder?: string;\n\trows?: number;\n\terror?: string;\n\thint?: string;\n\tdisabled?: boolean;\n\trequired?: boolean;\n\tsize?: \"sm\" | \"md\" | \"lg\";\n}\n\ninterface Emits {\n\t(e: \"update:modelValue\", value: string): void;\n\t(e: \"blur\"): void;\n\t(e: \"focus\"): void;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n\trows: 4,\n\tdisabled: false,\n\trequired: false,\n\tsize: \"md\",\n});\n\ndefineEmits<Emits>();\n\n// Generate unique ID for accessibility\nconst id = `textarea-${Math.random().toString(36).substr(2, 9)}`;\n\nconst textareaClasses = computed(() => {\n\tconst base =\n\t\t\"w-full bg-white dark:bg-gray-900 border rounded-lg text-gray-900 dark:text-gray-100 placeholder:text-gray-600 dark:placeholder:text-gray-400 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors resize-y\";\n\n\tconst sizes = {\n\t\tsm: \"text-sm px-3 py-1.5\",\n\t\tmd: \"text-sm px-4 py-2\",\n\t\tlg: \"text-base px-4 py-3\",\n\t};\n\n\tconst states = {\n\t\tnormal: \"border-gray-200 dark:border-gray-800\",\n\t\terror: \"border-danger focus:border-danger focus:ring-danger\",\n\t\tdisabled: \"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-950\",\n\t};\n\n\treturn [\n\t\tbase,\n\t\tsizes[props.size],\n\t\tprops.error ? states.error : states.normal,\n\t\tprops.disabled && states.disabled,\n\t]\n\t\t.filter(Boolean)\n\t\t.join(\" \");\n});\n</script>","<template>\n  <div>\n    <div class=\"space-y-2\">\n      <div v-if=\"modelValue.length > 0\" class=\"flex flex-wrap gap-2\">\n        <span\n          v-for=\"(tag, index) in modelValue\"\n          :key=\"tag\"\n          class=\"inline-flex items-center gap-1 px-3 py-1 text-sm bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded-full\"\n        >\n          {{ tag }}\n          <button\n            type=\"button\"\n            @click=\"removeTag(index)\"\n            class=\"ml-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n          >\n            <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </span>\n      </div>\n      \n      <div class=\"relative\">\n        <input\n          v-model=\"inputValue\"\n          :placeholder=\"placeholder\"\n          :disabled=\"disabled\"\n          :class=\"inputClasses\"\n          @keydown.enter.prevent=\"addTag\"\n          @keydown.comma.prevent=\"addTag\"\n          @blur=\"addTag\"\n        />\n      </div>\n    </div>\n    <p v-if=\"error\" class=\"error-message\">{{ error }}</p>\n    <p v-if=\"hint && !error\" class=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{{ hint }}</p>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\n\ninterface Props {\n\tmodelValue: string[];\n\tplaceholder?: string;\n\terror?: string;\n\thint?: string;\n\tdisabled?: boolean;\n\tmaxTags?: number;\n}\n\ntype Emits = (e: \"update:modelValue\", value: string[]) => void;\n\nconst props = withDefaults(defineProps<Props>(), {\n\tplaceholder: \"タグを入力してEnterキーを押してください\",\n\tdisabled: false,\n\tmaxTags: 10,\n});\n\nconst emit = defineEmits<Emits>();\n\nconst inputValue = ref(\"\");\n\nconst inputClasses = computed(() => {\n\tconst base =\n\t\t\"w-full px-4 py-2 bg-white dark:bg-gray-900 border rounded-lg text-gray-900 dark:text-gray-100 placeholder:text-gray-600 dark:placeholder:text-gray-400 focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors\";\n\n\tconst states = {\n\t\tnormal: \"border-gray-200 dark:border-gray-800\",\n\t\terror: \"border-danger focus:border-danger focus:ring-danger\",\n\t\tdisabled: \"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-950\",\n\t};\n\n\treturn [base, props.error ? states.error : states.normal, props.disabled && states.disabled]\n\t\t.filter(Boolean)\n\t\t.join(\" \");\n});\n\nconst addTag = () => {\n\tconst value = inputValue.value.trim();\n\n\tif (!value || props.modelValue.includes(value)) {\n\t\tinputValue.value = \"\";\n\t\treturn;\n\t}\n\n\tif (props.maxTags && props.modelValue.length >= props.maxTags) {\n\t\treturn;\n\t}\n\n\temit(\"update:modelValue\", [...props.modelValue, value]);\n\tinputValue.value = \"\";\n};\n\nconst removeTag = (index: number) => {\n\tconst newTags = [...props.modelValue];\n\tnewTags.splice(index, 1);\n\temit(\"update:modelValue\", newTags);\n};\n</script>","<template>\n  <div class=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n    <div class=\"container-lg py-8\">\n      <!-- ローディング -->\n      <div v-if=\"loading\" class=\"max-w-4xl mx-auto\">\n        <div class=\"skeleton h-10 w-2/3 mb-4\"></div>\n        <div class=\"skeleton h-6 w-1/3 mb-8\"></div>\n        <div class=\"card\">\n          <div class=\"skeleton h-4 w-full mb-2\"></div>\n          <div class=\"skeleton h-4 w-3/4 mb-2\"></div>\n          <div class=\"skeleton h-4 w-1/2\"></div>\n        </div>\n      </div>\n\n      <!-- エラー -->\n      <div v-else-if=\"error\" class=\"text-center py-12\">\n        <p class=\"text-danger mb-4\">{{ error }}</p>\n        <NuxtLink :to=\"getRuleUrl()\">\n          <CommonButton variant=\"ghost\">\n            {{ $t('common.back') }}\n          </CommonButton>\n        </NuxtLink>\n      </div>\n\n      <!-- 編集フォーム -->\n      <div v-else-if=\"rule\" class=\"max-w-4xl mx-auto\">\n        <div class=\"flex items-center justify-between mb-8\">\n          <h1 class=\"heading-1\">{{ $t('rules.edit.title') }}</h1>\n          <span v-if=\"hasChanges\" class=\"text-sm text-warning-600 dark:text-warning-400\">\n            <i class=\"fa-solid fa-circle-exclamation mr-1\"></i>\n            {{ $t('rules.edit.unsavedChanges') }}\n          </span>\n        </div>\n\n        <form @submit.prevent=\"handleSubmit\">\n          <CommonCard class=\"mb-6\">\n            <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n              {{ $t('rules.form.basicInfo') }}\n            </h2>\n\n            <div class=\"space-y-4\">\n              <CommonInput\n                v-model=\"form.name\"\n                :label=\"$t('rules.form.name')\"\n                :placeholder=\"$t('rules.form.namePlaceholder')\"\n                required\n                disabled\n                :error=\"errors.name\"\n              />\n\n              <CommonTextarea\n                v-model=\"form.description\"\n                :label=\"$t('rules.form.description')\"\n                :placeholder=\"$t('rules.form.descriptionPlaceholder')\"\n                rows=\"3\"\n                :error=\"errors.description\"\n              />\n\n              <div>\n                <label class=\"label\">{{ $t('rules.form.visibility') }}</label>\n                <CommonSelect\n                  v-model=\"form.visibility\"\n                  :options=\"visibilityOptions\"\n                  :error=\"errors.visibility\"\n                />\n              </div>\n\n              <div>\n                <label class=\"label\">{{ $t('rules.form.tags') }}</label>\n                <CommonTagInput\n                  v-model=\"form.tags\"\n                  :placeholder=\"$t('rules.form.tagsPlaceholder')\"\n                  :error=\"errors.tags\"\n                />\n              </div>\n            </div>\n          </CommonCard>\n\n          <CommonCard class=\"mb-6\">\n            <div class=\"flex items-center justify-between mb-4\">\n              <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                {{ $t('rules.form.content') }}\n              </h2>\n              <button\n                type=\"button\"\n                @click=\"showPreview = !showPreview\"\n                class=\"text-sm text-primary-600 dark:text-primary-400 hover:underline\"\n              >\n                {{ showPreview ? $t('rules.edit.hidePreview') : $t('rules.edit.showPreview') }}\n              </button>\n            </div>\n\n            <div v-if=\"!showPreview\">\n              <CommonTextarea\n                v-model=\"form.content\"\n                :placeholder=\"$t('rules.form.contentPlaceholder')\"\n                rows=\"15\"\n                class=\"font-mono\"\n                required\n                :error=\"errors.content\"\n              />\n            </div>\n            <div v-else class=\"prose prose-sm dark:prose-invert max-w-none\">\n              <div v-html=\"renderedContent\" />\n            </div>\n          </CommonCard>\n\n          <CommonCard v-if=\"contentChanged\">\n            <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">\n              {{ $t('rules.edit.changeLog') }}\n            </h2>\n\n            <CommonTextarea\n              v-model=\"form.changelog\"\n              :placeholder=\"$t('rules.edit.changeLogPlaceholder')\"\n              rows=\"3\"\n              required\n              :error=\"errors.changelog\"\n            />\n\n            <div class=\"mt-4\">\n              <label class=\"flex items-center gap-2\">\n                <input\n                  v-model=\"form.isMajorVersionUp\"\n                  type=\"checkbox\"\n                  class=\"h-4 w-4 text-blue-600 rounded focus:ring-blue-500\"\n                />\n                <span class=\"text-sm text-gray-700 dark:text-gray-300\">\n                  {{ $t('rules.edit.incrementMajorVersion') }} ({{ currentVersion }} → {{ nextVersion }})\n                </span>\n              </label>\n            </div>\n          </CommonCard>\n\n          <div class=\"flex justify-end gap-3 mt-8\">\n            <NuxtLink :to=\"getRuleUrl()\">\n              <CommonButton type=\"button\" variant=\"ghost\">\n                {{ $t('common.cancel') }}\n              </CommonButton>\n            </NuxtLink>\n            <CommonButton\n              type=\"submit\"\n              variant=\"primary\"\n              :loading=\"submitting\"\n              :disabled=\"!hasChanges\"\n            >\n              {{ $t('rules.edit.update') }}\n            </CommonButton>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { marked } from \"marked\";\nimport { storeToRefs } from \"pinia\";\nimport { computed, onMounted, reactive, ref } from \"vue\";\nimport { useToast } from \"~/composables/useToast\";\nimport { useAuthStore } from \"~/stores/auth\";\n\nconsole.log(\"Edit page loaded - /rules/@[owner]/[name]/edit.vue\");\n\ninterface Rule {\n\tid: string;\n\tname: string;\n\tdescription?: string;\n\tcontent: string;\n\tvisibility: \"public\" | \"private\";\n\ttags: string[];\n\tversion: string;\n\tauthor: {\n\t\tid: string;\n\t\tusername: string;\n\t};\n\torganization?: {\n\t\tid: string;\n\t\tname: string;\n\t\tdisplayName: string;\n\t};\n}\n\nconst route = useRoute();\nconst router = useRouter();\nconst { $rpc } = useNuxtApp();\nconst { t } = useI18n();\nconst authStore = useAuthStore();\nconst { user } = storeToRefs(authStore);\nconst { success: toastSuccess, error: toastError } = useToast();\n\n// Get route params from parent component or custom provider\ninterface CustomRouteParams {\n\towner?: string;\n\tname?: string;\n\tid?: string;\n}\nconst customParams = inject<CustomRouteParams | null>(\"customRouteParams\", null);\nconst routeParams = computed(() => {\n\tif (customParams) {\n\t\treturn customParams;\n\t}\n\treturn {\n\t\towner: route.params.owner,\n\t\tname: route.params.name,\n\t};\n});\n\nconst loading = ref(false);\nconst submitting = ref(false);\nconst error = ref(\"\");\nconst rule = ref<Rule | null>(null);\nconst showPreview = ref(false);\n\nconst form = reactive({\n\tname: \"\",\n\tdescription: \"\",\n\tcontent: \"\",\n\tvisibility: \"private\" as \"public\" | \"private\",\n\ttags: [] as string[],\n\tchangelog: \"\",\n\tisMajorVersionUp: false,\n});\n\nconst errors = reactive({\n\tname: \"\",\n\tdescription: \"\",\n\tcontent: \"\",\n\tvisibility: \"\",\n\ttags: \"\",\n\tchangelog: \"\",\n});\n\nconst visibilityOptions = [\n\t{ value: \"public\", label: t(\"rules.visibility.public\") },\n\t{ value: \"private\", label: t(\"rules.visibility.private\") },\n];\n\n// マークダウンをHTMLに変換\nconst renderedContent = computed(() => {\n\ttry {\n\t\treturn marked(form.content || \"\");\n\t} catch (e) {\n\t\treturn form.content || \"\";\n\t}\n});\n\n// 変更があるかどうかをチェック\nconst hasChanges = computed(() => {\n\tif (!rule.value) {\n\t\treturn false;\n\t}\n\n\treturn (\n\t\tform.name !== rule.value.name ||\n\t\tform.description !== rule.value.description ||\n\t\tform.content !== rule.value.content ||\n\t\tform.visibility !== rule.value.visibility ||\n\t\tJSON.stringify(form.tags) !== JSON.stringify(rule.value.tags)\n\t);\n});\n\n// コンテンツが変更されたかどうか\nconst contentChanged = computed(() => {\n\treturn rule.value && form.content !== rule.value.content;\n});\n\n// 現在のバージョン\nconst currentVersion = computed(() => {\n\tif (!rule.value) {\n\t\treturn \"1.0\";\n\t}\n\treturn `v${rule.value.version}`;\n});\n\n// 次のバージョン\nconst nextVersion = computed(() => {\n\tif (!rule.value) {\n\t\treturn \"v1.0\";\n\t}\n\tconst versionParts = rule.value.version.split(\".\");\n\tconst majorVersion = Number.parseInt(versionParts[0]) || 1;\n\tconst minorVersion = Number.parseInt(versionParts[1]) || 0;\n\n\tif (form.isMajorVersionUp) {\n\t\treturn `v${majorVersion + 1}.0`;\n\t} else {\n\t\treturn `v${majorVersion}.${minorVersion + 1}`;\n\t}\n});\n\nconst getRuleUrl = () => {\n\tif (!rule.value) {\n\t\treturn \"/rules\";\n\t}\n\n\tif (rule.value.organization) {\n\t\treturn `/rules/@${rule.value.organization.name}/${rule.value.name}`;\n\t}\n\treturn `/rules/@${rule.value.author.username}/${rule.value.name}`;\n};\n\nconst fetchRule = async () => {\n\tloading.value = true;\n\terror.value = \"\";\n\n\ttry {\n\t\tconst owner = routeParams.value.owner as string;\n\t\tconst ruleName = routeParams.value.name as string;\n\n\t\t// Fetch rule by path (@owner/rulename format)\n\t\tconst path = `@${owner}/${ruleName}`;\n\t\tconst data = await $rpc.rules.getByPath({ path });\n\n\t\t// オーナーでない場合はアクセス拒否\n\t\tif (data.author.id !== user.value?.id) {\n\t\t\t// 組織のルールの場合、メンバーかどうかチェック\n\t\t\tif (data.organization) {\n\t\t\t\tconst isMember = await $rpc.organizations\n\t\t\t\t\t.members({ organizationId: data.organization.id })\n\t\t\t\t\t.then((members) => members.some((m) => m.id === user.value?.id))\n\t\t\t\t\t.catch(() => false);\n\n\t\t\t\tif (!isMember) {\n\t\t\t\t\terror.value = t(\"rules.edit.notOwner\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\terror.value = t(\"rules.edit.notOwner\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// コンテンツを取得\n\t\tconst contentData = await $rpc.rules.getContent({ id: data.id });\n\n\t\trule.value = {\n\t\t\tid: data.id,\n\t\t\tname: data.name,\n\t\t\tdescription: data.description || \"\",\n\t\t\tcontent: contentData.content,\n\t\t\tvisibility: data.visibility as \"public\" | \"private\",\n\t\t\ttags: data.tags || [],\n\t\t\tversion: data.version,\n\t\t\tauthor: data.author,\n\t\t\torganization: data.organization,\n\t\t};\n\n\t\t// フォームに値を設定\n\t\tform.name = rule.value.name;\n\t\tform.description = rule.value.description || \"\";\n\t\tform.content = rule.value.content;\n\t\tform.visibility = rule.value.visibility;\n\t\tform.tags = rule.value.tags;\n\t} catch (err) {\n\t\tconsole.error(\"Failed to fetch rule:\", err);\n\t\terror.value = t(\"rules.edit.fetchError\");\n\t} finally {\n\t\tloading.value = false;\n\t}\n};\n\nconst validateForm = () => {\n\tlet valid = true;\n\n\t// Reset errors\n\tObject.keys(errors).forEach((key) => {\n\t\terrors[key as keyof typeof errors] = \"\";\n\t});\n\n\tif (!form.name.trim()) {\n\t\terrors.name = t(\"validation.required\");\n\t\tvalid = false;\n\t}\n\n\tif (!form.content.trim()) {\n\t\terrors.content = t(\"validation.required\");\n\t\tvalid = false;\n\t}\n\n\t// コンテンツが変更された場合のみchangelogを必須にする\n\tif (rule.value && form.content !== rule.value.content && !form.changelog.trim()) {\n\t\terrors.changelog = t(\"validation.required\");\n\t\tvalid = false;\n\t}\n\n\treturn valid;\n};\n\nconst handleSubmit = async () => {\n\tif (!validateForm() || !rule.value) {\n\t\treturn;\n\t}\n\n\tsubmitting.value = true;\n\n\ttry {\n\t\tawait $rpc.rules.update({\n\t\t\tid: rule.value.id,\n\t\t\tdescription: form.description,\n\t\t\tcontent: form.content,\n\t\t\tvisibility: form.visibility,\n\t\t\ttags: form.tags,\n\t\t\tchangelog: form.changelog,\n\t\t\tisMajorVersionUp: form.isMajorVersionUp,\n\t\t});\n\n\t\ttoastSuccess(t(\"rules.messages.updateSuccess\"));\n\t\tawait router.push(getRuleUrl());\n\t} catch (error) {\n\t\tconsole.error(\"Failed to update rule:\", error);\n\t\ttoastError(t(\"rules.messages.updateError\"));\n\t} finally {\n\t\tsubmitting.value = false;\n\t}\n};\n\nonMounted(() => {\n\tconsole.log(\"Edit page mounted with params:\", routeParams.value);\n\n\tif (!user.value) {\n\t\trouter.push(\"/login\");\n\t\treturn;\n\t}\n\n\tfetchRule();\n});\n</script>"],"names":["label","_ssrRenderAttr","required","placeholder","rows","disabled","modelValue","error","hint","_ssrRenderAttrs","_mergeProps","_push","_parent","_ssrRenderComponent","_","_scopeId","$t","_createVNode","_createBlock","_ssrIncludeBooleanAttr","_ssrLooseContain","_vModelCheckbox","_toDisplayString"],"mappings":"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"}