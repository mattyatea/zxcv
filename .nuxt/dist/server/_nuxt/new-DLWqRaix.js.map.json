{"file":"new-DLWqRaix.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","$t","_ssrRenderAttr","_ssrInterpolate","_push","_parent","_createBlock","_createVNode","_createTextVNode","_ssrRenderComponent","_","_scopeId"],"sources":["../../../../pages/organizations/new.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n    <div class=\"container-sm py-8\">\n      <div class=\"mb-8\">\n        <h1 class=\"heading-1 mb-2\">{{ $t('organizations.createNewTeam') }}</h1>\n        <p class=\"text-gray-600 dark:text-gray-400\">\n          {{ $t('organizations.inviteAndCollaborate') }}\n        </p>\n      </div>\n\n      <form @submit.prevent=\"handleSubmit\" class=\"card max-w-2xl\">\n        <div class=\"space-y-6\">\n          <CommonInput\n            v-model=\"form.name\"\n            :label=\"$t('organizations.form.name')\"\n            :placeholder=\"$t('organizations.form.namePlaceholder')\"\n            required\n            :error=\"errors.name\"\n          />\n\n          <div class=\"form-group\">\n            <label class=\"label\">{{ $t('organizations.form.description') }}</label>\n            <textarea\n              v-model=\"form.description\"\n              class=\"input min-h-[100px]\"\n              :placeholder=\"$t('organizations.form.descriptionPlaceholder')\"\n              rows=\"4\"\n            ></textarea>\n          </div>\n\n\n          <div class=\"form-group\">\n            <label class=\"label\">{{ $t('organizations.form.inviteMembers') }}</label>\n            <div class=\"space-y-2\">\n              <div v-for=\"(email, index) in inviteEmails\" :key=\"index\" class=\"flex gap-2\">\n                <CommonInput\n                  v-model=\"inviteEmails[index]\"\n                  type=\"email\"\n                  placeholder=\"email@example.com\"\n                  :error=\"errors[`email_${index}`]\"\n                />\n                <CommonButton\n                  v-if=\"inviteEmails.length > 1\"\n                  @click=\"removeEmail(index)\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                >\n                  <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                </CommonButton>\n              </div>\n              <CommonButton\n                @click=\"addEmail\"\n                variant=\"ghost\"\n                size=\"sm\"\n                type=\"button\"\n              >\n                <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\n                </svg>\n                {{ $t('organizations.form.addMember') }}\n              </CommonButton>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"flex items-center justify-between mt-8 pt-6 border-t border-gray-200 dark:border-gray-800\">\n          <NuxtLink to=\"/organizations\">\n            <CommonButton variant=\"ghost\">\n              {{ $t('common.cancel') }}\n            </CommonButton>\n          </NuxtLink>\n          <CommonButton\n            type=\"submit\"\n            variant=\"primary\"\n            :loading=\"submitting\"\n          >\n            {{ $t('organizations.createTeam') }}\n          </CommonButton>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport { useToast } from \"~/composables/useToast\";\n\ndefinePageMeta({\n\tmiddleware: \"auth\",\n});\n\ninterface OrganizationForm {\n\tname: string;\n\tdescription: string;\n}\n\nconst form = ref<OrganizationForm>({\n\tname: \"\",\n\tdescription: \"\",\n});\n\nconst { t } = useI18n();\nconst inviteEmails = ref<string[]>([\"\"]);\nconst errors = ref<Record<string, string>>({});\nconst submitting = ref(false);\n\nconst { success: toastSuccess, error: toastError } = useToast();\n\nconst addEmail = () => {\n\tinviteEmails.value.push(\"\");\n};\n\nconst removeEmail = (index: number) => {\n\tinviteEmails.value.splice(index, 1);\n};\n\nconst validateForm = (): boolean => {\n\terrors.value = {};\n\n\tif (!form.value.name.trim()) {\n\t\terrors.value.name = t(\"organizations.validation.nameRequired\");\n\t\treturn false;\n\t}\n\n\t// Validate organization name format\n\tif (!/^[a-zA-Z0-9-]+$/.test(form.value.name)) {\n\t\terrors.value.name = t(\"organizations.validation.nameFormat\");\n\t\treturn false;\n\t}\n\n\t// Validate emails\n\tinviteEmails.value.forEach((email, index) => {\n\t\tif (email && !email.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/)) {\n\t\t\terrors.value[`email_${index}`] = t(\"organizations.validation.invalidEmail\");\n\t\t}\n\t});\n\n\treturn Object.keys(errors.value).length === 0;\n};\n\nconst handleSubmit = async () => {\n\tif (!validateForm()) {\n\t\treturn;\n\t}\n\n\tsubmitting.value = true;\n\ttry {\n\t\tconst { $rpc } = useNuxtApp();\n\t\tconst data = await $rpc.organizations.create({\n\t\t\tname: form.value.name,\n\t\t\tdescription: form.value.description,\n\t\t\tinviteEmails: inviteEmails.value.filter((email) => email.trim()),\n\t\t});\n\n\t\ttoastSuccess(t(\"organizations.messages.created\"));\n\t\tawait navigateTo(`/organizations/${data.id}`);\n\t} catch (error) {\n\t\tconsole.error(\"Failed to create organization:\", error);\n\t\ttoastError(t(\"organizations.messages.createError\"));\n\t} finally {\n\t\tsubmitting.value = false;\n\t}\n};\n</script>"],"version":3}