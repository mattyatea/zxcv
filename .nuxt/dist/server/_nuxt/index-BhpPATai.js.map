{"version":3,"file":"index-BhpPATai.js","sources":["../../../../pages/rules/@[owner]/[name]/index.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50 dark:bg-gray-950\">\n    <div class=\"container-lg py-8\">\n      <!-- ローディング -->\n      <div v-if=\"loading\" class=\"max-w-4xl mx-auto\">\n        <div class=\"skeleton h-10 w-2/3 mb-4\"></div>\n        <div class=\"skeleton h-6 w-1/3 mb-8\"></div>\n        <div class=\"card\">\n          <div class=\"skeleton h-4 w-full mb-2\"></div>\n          <div class=\"skeleton h-4 w-3/4 mb-2\"></div>\n          <div class=\"skeleton h-4 w-1/2\"></div>\n        </div>\n      </div>\n\n      <!-- ルール詳細 -->\n      <div v-else-if=\"rule\" class=\"max-w-4xl mx-auto\">\n        <!-- ヘッダー -->\n        <div class=\"mb-8\">\n          <div class=\"flex items-start justify-between gap-4\">\n            <div>\n              <h1 class=\"heading-1 mb-3\">{{ rule.name }}</h1>\n              <div class=\"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400\">\n                <span class=\"flex items-center\">\n                  <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                  {{ rule.author.username }}\n                </span>\n                <span>v{{ rule.version }}</span>\n                <span>{{ formatDate(rule.updated_at) }}</span>\n                <span\n                  :class=\"[\n                    'px-2 py-1 text-xs rounded-full',\n                    rule.visibility === 'public' ? 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300' :\n                    rule.visibility === 'private' ? 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300' :\n                    'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300'\n                  ]\"\n                >\n                  {{ $t(`rules.visibility.${rule.visibility}`) }}\n                </span>\n              </div>\n            </div>\n            \n            <div class=\"flex items-center gap-2\">\n              <NuxtLink v-if=\"isOwner\" :to=\"`/rules/@${owner}/${name}/edit`\">\n                <CommonButton\n                  variant=\"ghost\"\n                  size=\"sm\"\n                >\n                  <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                  </svg>\n                  {{ $t('rules.actions.edit') }}\n                </CommonButton>\n              </NuxtLink>\n              <CommonButton\n                v-if=\"isOwner\"\n                variant=\"danger\"\n                size=\"sm\"\n                @click=\"showDeleteModal = true\"\n              >\n                <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n                {{ $t('rules.actions.delete') }}\n              </CommonButton>\n              <CommonButton\n                variant=\"primary\"\n                size=\"sm\"\n                @click=\"copyRule\"\n              >\n                <svg class=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                </svg>\n                {{ copied ? $t('rules.actions.copied') : $t('rules.actions.copyRule') }}\n              </CommonButton>\n            </div>\n          </div>\n        </div>\n\n        <!-- 説明 -->\n        <div v-if=\"rule.description\" class=\"card mb-6\">\n          <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3\">{{ $t('rules.form.description') }}</h2>\n          <p class=\"text-gray-600 dark:text-gray-400\">{{ rule.description }}</p>\n        </div>\n\n        <!-- タグ -->\n        <div v-if=\"rule.tags && rule.tags.length > 0\" class=\"mb-6\">\n          <div class=\"flex items-center gap-2\">\n            <svg class=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z\" />\n            </svg>\n            <div class=\"flex flex-wrap gap-2\">\n              <span\n                v-for=\"tag in rule.tags\"\n                :key=\"tag\"\n                class=\"px-3 py-1 text-sm bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded-full\"\n              >\n                {{ tag }}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <!-- バージョン表示中の通知 -->\n        <div v-if=\"rule.version !== originalVersion\" class=\"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\n          <div class=\"flex items-center justify-between\">\n            <p class=\"text-sm text-yellow-800 dark:text-yellow-200\">\n              {{ $t('rules.detail.viewingOldVersion', { version: `v${rule.version}` }) }}\n            </p>\n            <CommonButton\n              size=\"sm\"\n              variant=\"primary\"\n              @click=\"fetchRuleDetails\"\n            >\n              {{ $t('rules.detail.viewLatestVersion') }}\n            </CommonButton>\n          </div>\n        </div>\n\n        <!-- ルール内容 -->\n        <div class=\"card mb-6\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">{{ $t('rules.ruleContent') }}</h2>\n            <CommonButton\n              variant=\"ghost\"\n              size=\"xs\"\n              @click=\"copyContent\"\n            >\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n              </svg>\n            </CommonButton>\n          </div>\n          <div class=\"relative\">\n            <pre class=\"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto\"><code>{{ rule.content }}</code></pre>\n          </div>\n        </div>\n\n        <!-- バージョン履歴 -->\n        <div class=\"card\">\n          <h2 class=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\">{{ $t('rules.detail.versionHistory') }}</h2>\n          <div class=\"space-y-3\">\n            <div\n              v-for=\"version in versions\"\n              :key=\"version.version\"\n              class=\"group flex items-center justify-between p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer\"\n              @click=\"version.version !== rule.version && showVersion(version.version)\"\n            >\n              <div class=\"flex-1\">\n                <span class=\"font-medium text-gray-900 dark:text-gray-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors\">\n                  v{{ version.version }}\n                  <span v-if=\"version.version === originalVersion\" class=\"ml-2 text-xs text-green-600 dark:text-green-400\">\n                    ({{ $t('rules.detail.latest') }})\n                  </span>\n                </span>\n                <span class=\"text-sm text-gray-600 dark:text-gray-400 ml-3\">{{ version.changelog }}</span>\n              </div>\n              <div class=\"flex items-center gap-3\">\n                <span class=\"text-sm text-gray-600 dark:text-gray-400\">\n                  {{ formatDate(version.created_at) }}\n                </span>\n                <span v-if=\"version.version === rule.version\" class=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">\n                  {{ $t('rules.detail.currentlyViewing') }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 関連ルール -->\n        <div v-if=\"relatedRules.length > 0\" class=\"mt-8\">\n          <h2 class=\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4\">{{ $t('rules.detail.relatedRules') }}</h2>\n          <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n            <NuxtLink\n              v-for=\"related in relatedRules\"\n              :key=\"related.id\"\n              :to=\"getRuleUrl(related)\"\n              class=\"card-hover\"\n            >\n              <h3 class=\"font-medium text-gray-900 dark:text-gray-100 mb-1\">{{ related.name }}</h3>\n              <p class=\"text-sm text-gray-600 dark:text-gray-400\">by {{ related.organization ? '@' + related.organization.name : related.author.username }}</p>\n            </NuxtLink>\n          </div>\n        </div>\n      </div>\n\n      <!-- エラー -->\n      <div v-else class=\"text-center py-12\">\n        <p class=\"text-gray-600 dark:text-gray-400\">{{ $t('rules.detail.notFound') }}</p>\n        <NuxtLink to=\"/rules\">\n          <CommonButton variant=\"ghost\" class=\"mt-4\">\n            {{ $t('rules.detail.backToList') }}\n          </CommonButton>\n        </NuxtLink>\n      </div>\n    </div>\n    \n    <!-- 削除確認ダイアログ -->\n    <CommonModal v-model=\"showDeleteModal\" :title=\"$t('rules.messages.deleteConfirm')\" size=\"sm\">\n      <p class=\"text-gray-600 dark:text-gray-400\">\n        {{ $t('rules.messages.deleteConfirm') }}\n      </p>\n      <template #footer>\n        <CommonButton variant=\"ghost\" @click=\"showDeleteModal = false\">\n          {{ $t('common.cancel') }}\n        </CommonButton>\n        <CommonButton variant=\"danger\" @click=\"deleteRule\" :loading=\"deleting\">\n          {{ $t('common.delete') }}\n        </CommonButton>\n      </template>\n    </CommonModal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from \"pinia\";\nimport { computed, onMounted, ref } from \"vue\";\nimport { useToast } from \"~/composables/useToast\";\nimport { useAuthStore } from \"~/stores/auth\";\n\ninterface Author {\n\tid: string;\n\tusername: string;\n}\n\ninterface Organization {\n\tid: string;\n\tname: string;\n\tdisplayName: string;\n}\n\ninterface Rule {\n\tid: string;\n\tname: string;\n\tdescription?: string;\n\tcontent: string;\n\tvisibility: \"public\" | \"private\" | \"organization\";\n\tauthor: Author;\n\torganization?: Organization;\n\ttags: string[];\n\tversion: string;\n\tupdated_at: number;\n}\n\ninterface Version {\n\tversion: string;\n\tchangelog: string;\n\tcreated_at: number;\n}\n\nconst route = useRoute();\nconst { $rpc } = useNuxtApp();\nconst { t } = useI18n();\nconst router = useRouter();\nconst loading = ref(false);\nconst rule = ref<Rule | null>(null);\nconst versions = ref<Version[]>([]);\nconst relatedRules = ref<Rule[]>([]);\nconst isOwner = ref(false);\nconst copied = ref(false);\nconst originalVersion = ref<string>(\"\");\nconst authStore = useAuthStore();\nconst { user } = storeToRefs(authStore);\nconst { success: toastSuccess, error: toastError } = useToast();\nconst showDeleteModal = ref(false);\nconst deleting = ref(false);\n\n// Get route params from parent component or directly from route\ninterface CustomRouteParams {\n\towner?: string;\n\tname?: string;\n}\nconst customParams = inject<CustomRouteParams | null>(\"customRouteParams\", null);\nconst owner = computed(() => customParams?.owner || route.params.owner);\nconst name = computed(() => customParams?.name || route.params.name);\n\nconst fetchRuleDetails = async () => {\n\tloading.value = true;\n\ttry {\n\t\tconst path = `@${owner.value}/${name.value}`;\n\n\t\t// Fetch rule details by path\n\t\tconst data = await $rpc.rules.getByPath({ path });\n\n\t\t// Fetch content\n\t\tconst contentData = await $rpc.rules.getContent({ id: data.id });\n\n\t\trule.value = {\n\t\t\tid: data.id,\n\t\t\tname: data.name,\n\t\t\tdescription: data.description || \"\",\n\t\t\tcontent: contentData.content,\n\t\t\tvisibility: data.visibility as \"public\" | \"private\" | \"organization\",\n\t\t\tauthor: data.author,\n\t\t\torganization: data.organization,\n\t\t\ttags: data.tags || [],\n\t\t\tversion: data.version,\n\t\t\tupdated_at:\n\t\t\t\ttypeof data.updated_at === \"number\"\n\t\t\t\t\t? data.updated_at\n\t\t\t\t\t: Math.floor(new Date(data.updated_at).getTime() / 1000),\n\t\t};\n\n\t\t// オーナーかどうかを判定\n\t\t// 1. ルールの作成者の場合\n\t\t// 2. 組織のルールで、現在のユーザーが組織のオーナーの場合\n\t\tif (user.value?.id === data.author.id) {\n\t\t\tisOwner.value = true;\n\t\t} else if (data.organization) {\n\t\t\t// 組織のオーナーかどうかを確認\n\t\t\ttry {\n\t\t\t\tconst organizations = await $rpc.organizations.list();\n\t\t\t\tconst isOrgOwner = organizations.some(\n\t\t\t\t\t(org) => org.id === data.organization?.id && org.owner.id === user.value?.id,\n\t\t\t\t);\n\t\t\t\tisOwner.value = isOrgOwner;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Failed to check organization ownership:\", error);\n\t\t\t\tisOwner.value = false;\n\t\t\t}\n\t\t} else {\n\t\t\tisOwner.value = false;\n\t\t}\n\n\t\t// 元のバージョンを保存\n\t\toriginalVersion.value = data.version;\n\n\t\t// Fetch version history\n\t\ttry {\n\t\t\tconst versionsData = await $rpc.rules.versions({ id: data.id });\n\t\t\tversions.value = versionsData;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to fetch versions:\", error);\n\t\t}\n\n\t\t// Fetch related rules\n\t\ttry {\n\t\t\tconst relatedData = await $rpc.rules.related({ id: data.id });\n\t\t\trelatedRules.value = relatedData;\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to fetch related rules:\", error);\n\t\t}\n\t} catch (error) {\n\t\tconsole.error(\"Failed to fetch rule details:\", error);\n\t\trule.value = null;\n\t} finally {\n\t\tloading.value = false;\n\t}\n};\n\nconst { locale } = useI18n();\n\nconst formatDate = (timestamp: number) => {\n\treturn new Date(timestamp * 1000).toLocaleDateString(locale.value === \"ja\" ? \"ja-JP\" : \"en-US\");\n};\n\nconst copyRule = async () => {\n\tif (!rule.value) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tawait navigator.clipboard.writeText(rule.value.content);\n\t\tcopied.value = true;\n\t\ttoastSuccess(t(\"rules.messages.copied\"));\n\t\tsetTimeout(() => {\n\t\t\tcopied.value = false;\n\t\t}, 2000);\n\t} catch (error) {\n\t\tconsole.error(\"Failed to copy:\", error);\n\t\ttoastError(t(\"rules.messages.copyError\"));\n\t}\n};\n\nconst copyContent = async () => {\n\tif (!rule.value) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tawait navigator.clipboard.writeText(rule.value.content);\n\t\ttoastSuccess(t(\"rules.messages.contentCopied\"));\n\t} catch (error) {\n\t\tconsole.error(\"Failed to copy content:\", error);\n\t\ttoastError(t(\"rules.messages.copyError\"));\n\t}\n};\n\nconst getRuleUrl = (rule: { name: string; author: Author; organization?: Organization }) => {\n\tif (rule.organization) {\n\t\treturn `/rules/@${rule.organization.name}/${rule.name}`;\n\t}\n\t// User rules\n\treturn `/rules/@${rule.author.username}/${rule.name}`;\n};\n\nconst showVersion = async (versionNumber: string) => {\n\tconsole.log(\"Showing version:\", versionNumber);\n\tloading.value = true;\n\n\ttry {\n\t\t// まず現在のルールのIDを取得\n\t\tconst path = `@${owner.value}/${name.value}`;\n\t\tconst ruleData = await $rpc.rules.getByPath({ path });\n\t\tconst id = ruleData.id;\n\n\t\t// 特定のバージョンを取得\n\t\tconst versionData = await $rpc.rules.getVersion({ id, version: versionNumber });\n\n\t\t// 特定バージョンの内容を表示\n\t\trule.value = {\n\t\t\tid: versionData.id,\n\t\t\tname: versionData.name,\n\t\t\tdescription: versionData.description || \"\",\n\t\t\tcontent: versionData.content,\n\t\t\tvisibility: versionData.visibility as \"public\" | \"private\" | \"organization\",\n\t\t\tauthor: versionData.author,\n\t\t\torganization: versionData.organization,\n\t\t\ttags: versionData.tags,\n\t\t\tversion: versionData.version,\n\t\t\tupdated_at: versionData.createdAt,\n\t\t};\n\n\t\t// バージョン表示中であることを示すメッセージ\n\t\ttoastSuccess(t(\"rules.messages.viewingVersion\", { version: `v${versionNumber}` }));\n\t} catch (error) {\n\t\tconsole.error(\"Failed to fetch version:\", error);\n\t\ttoastError(t(\"rules.messages.versionFetchError\"));\n\t} finally {\n\t\tloading.value = false;\n\t}\n};\n\nconst deleteRule = async () => {\n\tif (!rule.value) {\n\t\treturn;\n\t}\n\n\tdeleting.value = true;\n\ttry {\n\t\tawait $rpc.rules.delete({ id: rule.value.id });\n\t\tshowDeleteModal.value = false;\n\t\ttoastSuccess(t(\"rules.messages.deleted\"));\n\t\t// ルール一覧にリダイレクト\n\t\tawait router.push(\"/rules\");\n\t} catch (error) {\n\t\tconsole.error(\"Failed to delete rule:\", error);\n\t\ttoastError(t(\"rules.messages.deleteError\"));\n\t} finally {\n\t\tdeleting.value = false;\n\t}\n};\n\nonMounted(() => {\n\tfetchRuleDetails();\n});\n</script>"],"names":["_a","rule","_ssrRenderAttrs","_mergeProps","_ssrInterpolate","$t","_push","_parent","_","_scopeId","_createBlock","_createVNode","_createTextVNode","_toDisplayString","_ssrRenderList","_ssrRenderComponent"],"mappings":"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"}