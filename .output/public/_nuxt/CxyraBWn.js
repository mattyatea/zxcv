import{_ as E}from"./CdYq105T.js";import{_ as B}from"./9Izdmuga.js";import{_ as M}from"./oZfRzh-Q.js";import{g as N,r as v,u as x,c as f,a,t as n,z as T,b as i,k as F,s as j,F as A,p as S,w as d,o as g,B as U,l as L,d as h,h as q,n as D}from"./CyjY5H8A.js";import{u as H}from"./JGZA2kR1.js";import"./DlAUqK2U.js";import"./CLdyUvtB.js";const I={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},P={class:"container-sm py-8"},O={class:"mb-8"},R={class:"heading-1 mb-2"},Z={class:"text-gray-600 dark:text-gray-400"},G={class:"space-y-6"},J={class:"form-group"},K={class:"label"},Q=["placeholder"],W={class:"form-group"},X={class:"label"},Y={class:"space-y-2"},ee={class:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200 dark:border-gray-800"},me=N({__name:"new",setup(ae){const t=v({name:"",description:""}),{t:l}=x(),s=v([""]),r=v({}),_=v(!1),{success:k,error:z}=H(),y=()=>{s.value.push("")},$=e=>{s.value.splice(e,1)},w=()=>(r.value={},t.value.name.trim()?/^[a-zA-Z0-9-]+$/.test(t.value.name)?(s.value.forEach((e,o)=>{e&&!e.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)&&(r.value[`email_${o}`]=l("organizations.validation.invalidEmail"))}),Object.keys(r.value).length===0):(r.value.name=l("organizations.validation.nameFormat"),!1):(r.value.name=l("organizations.validation.nameRequired"),!1)),V=async()=>{if(w()){_.value=!0;try{const{$rpc:e}=q(),o=await e.organizations.create({name:t.value.name,description:t.value.description,inviteEmails:s.value.filter(c=>c.trim())});k(l("organizations.messages.created")),await D(`/organizations/${o.id}`)}catch(e){console.error("Failed to create organization:",e),z(l("organizations.messages.createError"))}finally{_.value=!1}}};return(e,o)=>{const c=E,u=B,C=M;return g(),f("div",I,[a("div",P,[a("div",O,[a("h1",R,n(e.$t("organizations.createNewTeam")),1),a("p",Z,n(e.$t("organizations.inviteAndCollaborate")),1)]),a("form",{onSubmit:T(V,["prevent"]),class:"card max-w-2xl"},[a("div",G,[i(c,{modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=p=>t.value.name=p),label:e.$t("organizations.form.name"),placeholder:e.$t("organizations.form.namePlaceholder"),required:"",error:r.value.name},null,8,["modelValue","label","placeholder","error"]),a("div",J,[a("label",K,n(e.$t("organizations.form.description")),1),F(a("textarea",{"onUpdate:modelValue":o[1]||(o[1]=p=>t.value.description=p),class:"input min-h-[100px]",placeholder:e.$t("organizations.form.descriptionPlaceholder"),rows:"4"},null,8,Q),[[j,t.value.description]])]),a("div",W,[a("label",X,n(e.$t("organizations.form.inviteMembers")),1),a("div",Y,[(g(!0),f(A,null,S(s.value,(p,m)=>(g(),f("div",{key:m,class:"flex gap-2"},[i(c,{modelValue:s.value[m],"onUpdate:modelValue":b=>s.value[m]=b,type:"email",placeholder:"email@example.com",error:r.value[`email_${m}`]},null,8,["modelValue","onUpdate:modelValue","error"]),s.value.length>1?(g(),U(u,{key:0,onClick:b=>$(m),variant:"ghost",size:"sm"},{default:d(()=>o[2]||(o[2]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])),_:2,__:[2]},1032,["onClick"])):L("",!0)]))),128)),i(u,{onClick:y,variant:"ghost",size:"sm",type:"button"},{default:d(()=>[o[3]||(o[3]=a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),h(" "+n(e.$t("organizations.form.addMember")),1)]),_:1,__:[3]})])])]),a("div",ee,[i(C,{to:"/organizations"},{default:d(()=>[i(u,{variant:"ghost"},{default:d(()=>[h(n(e.$t("common.cancel")),1)]),_:1})]),_:1}),i(u,{type:"submit",variant:"primary",loading:_.value},{default:d(()=>[h(n(e.$t("organizations.createTeam")),1)]),_:1},8,["loading"])])],32)])])}}});export{me as default};
