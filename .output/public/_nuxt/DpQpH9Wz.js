import{_ as b}from"./oZfRzh-Q.js";import{h as p,C as E,r as i,j as M,c as n,a as e,b as f,t as a,f as r,w as v,T as z,o as d,d as _}from"./CyjY5H8A.js";import{u as C}from"./BFNUtisj.js";import{_ as T}from"./DlAUqK2U.js";const B={class:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},L={class:"max-w-md w-full space-y-8"},V={class:"text-center"},N={class:"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white"},j={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},D={key:"loading",class:"flex justify-center"},H={key:"success",class:"rounded-lg bg-green-50 dark:bg-green-900/20 p-6 card-entrance"},q={class:"flex"},A={class:"ml-3"},R={class:"text-sm font-medium text-green-800 dark:text-green-200"},$={class:"mt-2 text-sm text-green-700 dark:text-green-300"},I={class:"mt-1"},S={class:"mt-4"},F={key:"error",class:"rounded-lg bg-red-50 dark:bg-red-900/20 p-6 error-shake"},G={class:"flex"},J={class:"ml-3"},K={class:"text-sm font-medium text-red-800 dark:text-red-200"},O={class:"mt-2 text-sm text-red-700 dark:text-red-300"},P={class:"mt-4 flex space-x-3"},Q=["disabled"],U={key:"no-token",class:"rounded-lg bg-yellow-50 dark:bg-yellow-900/20 p-6 card-entrance"},W={class:"flex"},X={class:"ml-3"},Y={class:"text-sm font-medium text-yellow-800 dark:text-yellow-200"},Z={class:"mt-2 text-sm text-yellow-700 dark:text-yellow-300"},ee={class:"mt-1"},te={__name:"verifyemail",setup(se){const{$t:t}=p();C({title:t("auth.verifyEmail.pageTitle")});const g=E(),{$rpc:h}=p(),c=i(!0),x=i(!1),u=i(!1),m=i(""),l=i(!1),w=async()=>{const o=g.query.token;if(!o){c.value=!1;return}try{const s=await h.auth.verifyEmail({token:o});s.success?x.value=!0:(u.value=!0,m.value=s.message||t("auth.verifyEmail.errorMessage"))}catch(s){u.value=!0,m.value=s.message||t("auth.verifyEmail.invalidToken")}finally{c.value=!1}},k=async()=>{l.value=!0;const o=g.query.email||prompt(t("auth.verifyEmail.enterEmail"));if(!o){l.value=!1;return}try{const s=await h.auth.sendVerification({email:o,locale:"ja"});s.success?alert(t("auth.verifyEmail.emailResent")):alert(s.message||t("auth.verifyEmail.resendError"))}catch(s){alert(s.message||t("auth.verifyEmail.generalError"))}finally{l.value=!1}};return M(()=>{w()}),(o,s)=>{const y=b;return d(),n("div",B,[e("div",L,[e("div",V,[e("h2",N,a(r(t)("auth.verifyEmail.title")),1),e("p",j,a(r(t)("auth.verifyEmail.verifying")),1)]),f(z,{name:"pulse-fade",mode:"out-in"},{default:v(()=>[c.value?(d(),n("div",D,s[0]||(s[0]=[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 animate-ping rounded-full h-12 w-12 bg-primary-400 opacity-20"}),e("svg",{class:"animate-spin h-10 w-10 text-primary-600 relative",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])],-1)]))):x.value?(d(),n("div",H,[e("div",q,[s[1]||(s[1]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400 checkmark-animation",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",A,[e("h3",R,a(r(t)("auth.verifyEmail.success")),1),e("div",$,[e("p",null,a(r(t)("auth.verifyEmail.successMessage")),1),e("p",I,a(r(t)("auth.verifyEmail.successDescription")),1)]),e("div",S,[f(y,{to:"/auth",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 button-hover"},{default:v(()=>[_(a(r(t)("auth.verifyEmail.goToLogin")),1)]),_:1})])])])])):u.value?(d(),n("div",F,[e("div",G,[s[2]||(s[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",J,[e("h3",K,a(r(t)("auth.verifyEmail.error")),1),e("div",O,[e("p",null,a(m.value),1)]),e("div",P,[f(y,{to:"/register",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},{default:v(()=>[_(a(r(t)("auth.verifyEmail.register")),1)]),_:1}),e("button",{onClick:k,disabled:l.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},a(l.value?r(t)("auth.verifyEmail.resending"):r(t)("auth.verifyEmail.resendEmail")),9,Q)])])])])):(d(),n("div",U,[e("div",W,[s[3]||(s[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",X,[e("h3",Y,a(r(t)("auth.verifyEmail.noToken")),1),e("div",Z,[e("p",null,a(r(t)("auth.verifyEmail.noTokenMessage")),1),e("p",ee,a(r(t)("auth.verifyEmail.noTokenDescription")),1)])])])]))]),_:1})])])}}},ie=T(te,[["__scopeId","data-v-3d390aed"]]);export{ie as default};
