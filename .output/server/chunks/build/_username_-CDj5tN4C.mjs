import{_ as e}from"./nuxt-link-4uLnvjVp.mjs";import{_ as r}from"./Modal-DWgkDmQ5.mjs";import{_ as a}from"./Input-CQRSLkRN.mjs";import{_ as l}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{_ as t}from"./Button-BAc5buFc.mjs";import{v as o,h as s,a as d,s as n}from"./server.mjs";import{u as i}from"./useToast-CcSWCLuS.mjs";import{u}from"./auth-DJ_gFT6B.mjs";import{B as c,C as p,z as m,E as v,G as f,J as g,A as x}from"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:events";import"node:process";import"cloudflare:workers";import"node:buffer";import"node:timers";import"@prisma/client";import"node:util";import"node:zlib";import"node:stream";import"node:url";import"node:net";import"node:path";import"../_/index4.mjs";import"../_/client.DwfV9Oyl.mjs";import"../_/shared.esm-bundler.mjs";import"./toast-DzkE1rsh.mjs";const b=o.defineComponent({__name:"Badge",__ssrInlineRender:!0,props:{variant:{default:"gray"},size:{default:"sm"},rounded:{default:"full"},closable:{type:Boolean,default:!1},icon:{},dot:{type:Boolean,default:!1}},emits:["close"],setup(e){const r=e,a=o.computed(()=>["badge inline-flex items-center font-medium transition-all duration-200",{primary:"badge-primary",success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info",gray:"badge-gray"}[r.variant],{xs:"text-xs px-2 py-0.5",sm:"text-xs px-2.5 py-0.5",md:"text-sm px-3 py-1",lg:"text-base px-4 py-1.5"}[r.size],{md:"rounded-md",lg:"rounded-lg",full:"rounded-full"}[r.rounded]].join(" "));return(e,r,l,t)=>{r(`<span${c(o.mergeProps({class:a.value},t))} data-v-bb0bdee7>`),e.$slots.icon||e.icon||e.dot?(r('<span class="badge-icon" data-v-bb0bdee7>'),e.dot?r('<span class="badge-dot" data-v-bb0bdee7></span>'):g(e.$slots,"icon",{},()=>{e.icon?x(r,o.createVNode(o.resolveDynamicComponent(e.icon),null,null),l):r("\x3c!----\x3e")},r,l),r("</span>")):r("\x3c!----\x3e"),g(e.$slots,"default",{},null,r,l),e.closable?r('<button type="button" class="badge-close" data-v-bb0bdee7><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-bb0bdee7><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" data-v-bb0bdee7></path></svg></button>'):r("\x3c!----\x3e"),r("</span>")}}}),w=b.setup;b.setup=(e,r)=>{const a=o.useSSRContext();return(a.modules||(a.modules=new Set)).add("components/common/Badge.vue"),w?w(e,r):void 0};const h=l(b,[["__scopeId","data-v-bb0bdee7"]]),y=o.defineComponent({__name:"[username]",__ssrInlineRender:!0,setup(l){s();const{$rpc:g,$t:x}=d(),b=u(),{user:w}=n(b),y=o.ref(!0),k=o.ref(null),V=o.ref(null),C=o.ref({rulesCount:0,organizationsCount:0}),$=o.ref([]),P=o.ref(!1),N=o.ref(!1),_=o.ref(null),B=o.ref({username:"",email:""}),S=o.ref({}),j=o.ref(!1),D=o.ref(!1),z=o.ref(null),U=o.ref({currentPassword:"",newPassword:"",confirmPassword:""}),M=o.ref({}),A=o.ref(!1),T=o.computed(()=>{var e,r;return(null==(e=w.value)?void 0:e.id)===(null==(r=V.value)?void 0:r.id)}),H=o.computed(()=>{const e=B.value.username.trim().length>0,r=B.value.email.trim().length>0,a=!S.value.username&&!S.value.email;return e&&r&&a}),q=o.computed(()=>U.value.currentPassword.length>0&&U.value.newPassword.length>=8&&U.value.confirmPassword.length>0&&0===Object.keys(M.value).length),formatDate=e=>new Date(1e3*e).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),validateUsername=()=>{S.value.username="";const e=B.value.username.trim();e?/^[a-zA-Z0-9_-]+$/.test(e)?e.length<3&&(S.value.username=x("profile.errors.usernameMinLength")):S.value.username=x("profile.errors.usernameInvalid"):S.value.username=x("profile.errors.usernameRequired")},validateEmail=()=>{S.value.email="";const e=B.value.email.trim();e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(S.value.email=x("profile.errors.emailInvalid")):S.value.email=x("profile.errors.emailRequired")},validateNewPassword=()=>{M.value.newPassword="",U.value.newPassword.length<8&&(M.value.newPassword=x("profile.errors.passwordMinLength"))},validatePasswordConfirm=()=>{M.value.confirmPassword="",U.value.newPassword!==U.value.confirmPassword&&(M.value.confirmPassword=x("profile.errors.passwordMismatch"))},updateProfile=async()=>{console.log("updateProfile called"),console.log("isFormValid:",H.value),console.log("editForm:",B.value),console.log("errors:",S.value);try{if(N.value=!0,_.value=null,validateUsername(),validateEmail(),!H.value)return void console.log("Form is invalid, returning");console.log("Calling API with:",{username:B.value.username.trim(),email:B.value.email.trim()});const e=await g.users.updateProfile({username:B.value.username.trim(),email:B.value.email.trim()});console.log("API response:",e),V.value=e.user,P.value=!1,T.value&&await b.updateUser(e.user);const{success:r}=i();r(x("profile.success.profileUpdated"))}catch(e){console.error("Failed to update profile:",e),e instanceof Error?e.message.includes("already in use")?_.value=x("profile.errors.usernameOrEmailTaken"):_.value=e.message||x("profile.errors.updateFailed"):_.value=x("profile.errors.updateFailed")}finally{N.value=!1}},cancelEdit=()=>{P.value=!1,_.value=null,S.value={},V.value&&(B.value={username:V.value.username,email:V.value.email}),console.log("cancelEdit - errors cleared:",S.value)},changePassword=async()=>{try{if(D.value=!0,z.value=null,validateNewPassword(),validatePasswordConfirm(),!q.value)return;await g.users.changePassword({currentPassword:U.value.currentPassword,newPassword:U.value.newPassword}),U.value={currentPassword:"",newPassword:"",confirmPassword:""},M.value={},j.value=!1;const{success:e}=i();e(x("profile.success.passwordChanged"))}catch(e){console.error("Failed to change password:",e),e instanceof Error?e.message.includes("incorrect")||e.message.includes("wrong")?z.value=x("profile.errors.wrongCurrentPassword"):z.value=e.message||x("profile.errors.passwordChangeFailed"):z.value=x("profile.errors.passwordChangeFailed")}finally{D.value=!1}};return(l,s,d,n)=>{const i=e,u=r,g=a,b=h,w=t;s(`<div${c(o.mergeProps({class:"container mx-auto max-w-4xl px-4 py-8"},n))}>`),y.value?s('<div class="flex justify-center items-center min-h-[400px]"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div></div>'):k.value?(s(`<div class="text-center py-8"><p class="text-red-600 mb-4">${p(k.value)}</p>`),s(m(i,{to:"/",class:"text-blue-600 hover:underline"},{default:o.withCtx((e,r,a,l)=>{if(!r)return[o.createTextVNode(o.toDisplayString(o.unref(x)("profile.backToHome")),1)];r(`${p(o.unref(x)("profile.backToHome"))}`)}),_:1},d)),s("</div>")):V.value?(s(`<div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6 mb-6"><div class="flex items-start justify-between"><div class="flex items-center space-x-4"><div class="w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold">${p(V.value.username.charAt(0).toUpperCase())}</div><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">${p(V.value.username)}</h1><p class="text-gray-600 dark:text-gray-400">${p(V.value.email)}</p><div class="flex items-center mt-2">`),V.value.emailVerified?s(`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> ${p(o.unref(x)("profile.emailVerified"))}</span>`):s(`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-400">${p(o.unref(x)("profile.emailNotVerified"))}</span>`),s("</div></div></div>"),T.value?s(`<button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">${p(o.unref(x)("profile.editProfile"))}</button>`):s("\x3c!----\x3e"),s(`</div></div><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">${p(o.unref(x)("profile.createdRules"))}</h3><p class="text-3xl font-bold text-blue-600">${p(C.value.rulesCount||0)}</p></div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">${p(o.unref(x)("profile.belongingOrganizations"))}</h3><p class="text-3xl font-bold text-green-600">${p(C.value.organizationsCount||0)}</p></div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6"><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">${p(o.unref(x)("profile.registrationDate"))}</h3><p class="text-lg text-gray-600 dark:text-gray-400">${p(formatDate(V.value.createdAt))}</p></div></div><div class="bg-white dark:bg-gray-800 rounded-lg shadow-md dark:shadow-gray-900/50 p-6"><h2 class="text-xl font-bold text-gray-900 dark:text-white mb-4">${p(o.unref(x)("profile.recentActivity"))}</h2>`),$.value.length>0?(s('<div class="space-y-4">\x3c!--[--\x3e'),v($.value,e=>{s('<div class="border-b border-gray-200 dark:border-gray-700 pb-4 last:border-0"><div class="flex justify-between items-start"><div>'),s(m(i,{to:e.organization?`/rules/@${e.organization.name}/${e.name}`:`/rules/@${V.value.username}/${e.name}`,class:"text-lg font-medium text-blue-600 hover:underline"},{default:o.withCtx((r,a,l,t)=>{if(!a)return[o.createTextVNode(o.toDisplayString(e.name),1)];a(`${p(e.name)}`)}),_:2},d)),s(`<p class="text-sm text-gray-600 dark:text-gray-400 mt-1">${p(e.description)}</p></div><span class="text-sm text-gray-500 dark:text-gray-500">${p(formatDate(e.updatedAt))}</span></div></div>`)}),s("\x3c!--]--\x3e</div>")):s(`<div class="text-gray-500 dark:text-gray-400 text-center py-8">${p(o.unref(x)("profile.noActivityYet"))}</div>`),s("</div></div>")):s("\x3c!----\x3e"),s(m(u,{modelValue:P.value,"onUpdate:modelValue":e=>P.value=e,title:o.unref(x)("profile.editProfile"),onClose:cancelEdit},{default:o.withCtx((e,r,a,l)=>{var t,s;if(!r)return[o.createVNode("form",{onSubmit:o.withModifiers(updateProfile,["prevent"]),class:"space-y-4"},[o.createVNode("div",{class:"flex flex-col items-center mb-6"},[o.createVNode("div",{class:"relative"},[o.createVNode("div",{class:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold"},o.toDisplayString(B.value.username.charAt(0).toUpperCase()),1),o.createVNode("button",{type:"button",class:"absolute bottom-0 right-0 p-2 bg-white dark:bg-gray-700 rounded-full shadow-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",onClick:e=>A.value=!0,title:o.unref(x)("profile.changeAvatar")},[(o.openBlock(),o.createBlock("svg",{class:"w-4 h-4 text-gray-600 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),o.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]))],8,["onClick","title"])]),o.createVNode("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},o.toDisplayString(o.unref(x)("profile.avatarChangeComingSoon")),1)]),o.createVNode("div",null,[o.createVNode(g,{modelValue:B.value.username,"onUpdate:modelValue":e=>B.value.username=e,label:o.unref(x)("profile.username"),placeholder:o.unref(x)("profile.placeholders.username"),error:S.value.username,required:"",onBlur:validateUsername},{hint:o.withCtx(()=>[o.createVNode("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},o.toDisplayString(o.unref(x)("profile.usernameHint")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label","placeholder","error"])]),o.createVNode("div",null,[o.createVNode(g,{modelValue:B.value.email,"onUpdate:modelValue":e=>B.value.email=e,type:"email",label:o.unref(x)("profile.email"),placeholder:o.unref(x)("profile.placeholders.email"),error:S.value.email,required:"",onBlur:validateEmail},null,8,["modelValue","onUpdate:modelValue","label","placeholder","error"]),B.value.email!==(null==(s=V.value)?void 0:s.email)?(o.openBlock(),o.createBlock("div",{key:0,class:"mt-2"},[o.createVNode(b,{variant:"warning",size:"sm"},{default:o.withCtx(()=>[(o.openBlock(),o.createBlock("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o.createVNode("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])),o.createTextVNode(" "+o.toDisplayString(o.unref(x)("profile.emailChangeWarning")),1)]),_:1})])):o.createCommentVNode("",!0)]),o.createVNode("div",{class:"pt-4 border-t border-gray-200 dark:border-gray-700"},[o.createVNode("button",{type:"button",onClick:e=>j.value=!0,class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"},o.toDisplayString(o.unref(x)("profile.changePassword")),9,["onClick"])]),_.value?(o.openBlock(),o.createBlock("div",{key:0,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"},[o.createVNode("p",{class:"text-sm text-red-600 dark:text-red-400"},o.toDisplayString(_.value),1)])):o.createCommentVNode("",!0),o.createVNode("div",{class:"flex justify-end space-x-3 pt-4"},[o.createVNode(w,{type:"button",variant:"secondary",onClick:cancelEdit},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(x)("common.cancel")),1)]),_:1}),o.createVNode(w,{type:"submit",loading:N.value,disabled:!H.value||N.value},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(x)("profile.update")),1)]),_:1},8,["loading","disabled"])])],32)];r(`<form class="space-y-4"${l}><div class="flex flex-col items-center mb-6"${l}><div class="relative"${l}><div class="w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold"${l}>${p(B.value.username.charAt(0).toUpperCase())}</div><button type="button" class="absolute bottom-0 right-0 p-2 bg-white dark:bg-gray-700 rounded-full shadow-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"${f("title",o.unref(x)("profile.changeAvatar"))}${l}><svg class="w-4 h-4 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"${l}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"${l}></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"${l}></path></svg></button></div><p class="text-sm text-gray-500 dark:text-gray-400 mt-2"${l}>${p(o.unref(x)("profile.avatarChangeComingSoon"))}</p></div><div${l}>`),r(m(g,{modelValue:B.value.username,"onUpdate:modelValue":e=>B.value.username=e,label:o.unref(x)("profile.username"),placeholder:o.unref(x)("profile.placeholders.username"),error:S.value.username,required:"",onBlur:validateUsername},{hint:o.withCtx((e,r,a,l)=>{if(!r)return[o.createVNode("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},o.toDisplayString(o.unref(x)("profile.usernameHint")),1)];r(`<p class="text-xs text-gray-500 dark:text-gray-400 mt-1"${l}>${p(o.unref(x)("profile.usernameHint"))}</p>`)}),_:1},a,l)),r(`</div><div${l}>`),r(m(g,{modelValue:B.value.email,"onUpdate:modelValue":e=>B.value.email=e,type:"email",label:o.unref(x)("profile.email"),placeholder:o.unref(x)("profile.placeholders.email"),error:S.value.email,required:"",onBlur:validateEmail},null,a,l)),B.value.email!==(null==(t=V.value)?void 0:t.email)?(r(`<div class="mt-2"${l}>`),r(m(b,{variant:"warning",size:"sm"},{default:o.withCtx((e,r,a,l)=>{if(!r)return[(o.openBlock(),o.createBlock("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[o.createVNode("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])),o.createTextVNode(" "+o.toDisplayString(o.unref(x)("profile.emailChangeWarning")),1)];r(`<svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"${l}><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"${l}></path></svg> ${p(o.unref(x)("profile.emailChangeWarning"))}`)}),_:1},a,l)),r("</div>")):r("\x3c!----\x3e"),r(`</div><div class="pt-4 border-t border-gray-200 dark:border-gray-700"${l}><button type="button" class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"${l}>${p(o.unref(x)("profile.changePassword"))}</button></div>`),_.value?r(`<div class="p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"${l}><p class="text-sm text-red-600 dark:text-red-400"${l}>${p(_.value)}</p></div>`):r("\x3c!----\x3e"),r(`<div class="flex justify-end space-x-3 pt-4"${l}>`),r(m(w,{type:"button",variant:"secondary",onClick:cancelEdit},{default:o.withCtx((e,r,a,l)=>{if(!r)return[o.createTextVNode(o.toDisplayString(o.unref(x)("common.cancel")),1)];r(`${p(o.unref(x)("common.cancel"))}`)}),_:1},a,l)),r(m(w,{type:"submit",loading:N.value,disabled:!H.value||N.value},{default:o.withCtx((e,r,a,l)=>{if(!r)return[o.createTextVNode(o.toDisplayString(o.unref(x)("profile.update")),1)];r(`${p(o.unref(x)("profile.update"))}`)}),_:1},a,l)),r("</div></form>")}),_:1},d)),s(m(u,{modelValue:j.value,"onUpdate:modelValue":e=>j.value=e,title:o.unref(x)("profile.changePassword"),onClose:e=>j.value=!1},{default:o.withCtx((e,r,a,l)=>{if(!r)return[o.createVNode("form",{onSubmit:o.withModifiers(changePassword,["prevent"]),class:"space-y-4"},[o.createVNode(g,{modelValue:U.value.currentPassword,"onUpdate:modelValue":e=>U.value.currentPassword=e,type:"password",label:o.unref(x)("profile.currentPassword"),placeholder:o.unref(x)("profile.placeholders.currentPassword"),error:M.value.currentPassword,required:""},null,8,["modelValue","onUpdate:modelValue","label","placeholder","error"]),o.createVNode(g,{modelValue:U.value.newPassword,"onUpdate:modelValue":e=>U.value.newPassword=e,type:"password",label:o.unref(x)("profile.newPassword"),placeholder:o.unref(x)("profile.placeholders.newPassword"),error:M.value.newPassword,required:"",onBlur:validateNewPassword},{hint:o.withCtx(()=>[o.createVNode("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},o.toDisplayString(o.unref(x)("profile.passwordHint")),1)]),_:1},8,["modelValue","onUpdate:modelValue","label","placeholder","error"]),o.createVNode(g,{modelValue:U.value.confirmPassword,"onUpdate:modelValue":e=>U.value.confirmPassword=e,type:"password",label:o.unref(x)("profile.newPasswordConfirm"),placeholder:o.unref(x)("profile.placeholders.newPasswordConfirm"),error:M.value.confirmPassword,required:"",onBlur:validatePasswordConfirm},null,8,["modelValue","onUpdate:modelValue","label","placeholder","error"]),z.value?(o.openBlock(),o.createBlock("div",{key:0,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"},[o.createVNode("p",{class:"text-sm text-red-600 dark:text-red-400"},o.toDisplayString(z.value),1)])):o.createCommentVNode("",!0),o.createVNode("div",{class:"flex justify-end space-x-3 pt-4"},[o.createVNode(w,{type:"button",variant:"secondary",onClick:e=>j.value=!1},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(x)("common.cancel")),1)]),_:1},8,["onClick"]),o.createVNode(w,{type:"submit",loading:D.value,disabled:!q.value||D.value},{default:o.withCtx(()=>[o.createTextVNode(o.toDisplayString(o.unref(x)("profile.change")),1)]),_:1},8,["loading","disabled"])])],32)];r(`<form class="space-y-4"${l}>`),r(m(g,{modelValue:U.value.currentPassword,"onUpdate:modelValue":e=>U.value.currentPassword=e,type:"password",label:o.unref(x)("profile.currentPassword"),placeholder:o.unref(x)("profile.placeholders.currentPassword"),error:M.value.currentPassword,required:""},null,a,l)),r(m(g,{modelValue:U.value.newPassword,"onUpdate:modelValue":e=>U.value.newPassword=e,type:"password",label:o.unref(x)("profile.newPassword"),placeholder:o.unref(x)("profile.placeholders.newPassword"),error:M.value.newPassword,required:"",onBlur:validateNewPassword},{hint:o.withCtx((e,r,a,l)=>{if(!r)return[o.createVNode("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},o.toDisplayString(o.unref(x)("profile.passwordHint")),1)];r(`<p class="text-xs text-gray-500 dark:text-gray-400 mt-1"${l}>${p(o.unref(x)("profile.passwordHint"))}</p>`)}),_:1},a,l)),r(m(g,{modelValue:U.value.confirmPassword,"onUpdate:modelValue":e=>U.value.confirmPassword=e,type:"password",label:o.unref(x)("profile.newPasswordConfirm"),placeholder:o.unref(x)("profile.placeholders.newPasswordConfirm"),error:M.value.confirmPassword,required:"",onBlur:validatePasswordConfirm},null,a,l)),z.value?r(`<div class="p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md"${l}><p class="text-sm text-red-600 dark:text-red-400"${l}>${p(z.value)}</p></div>`):r("\x3c!----\x3e"),r(`<div class="flex justify-end space-x-3 pt-4"${l}>`),r(m(w,{type:"button",variant:"secondary",onClick:e=>j.value=!1},{default:o.withCtx((e,r,a,l)=>{if(!r)return[o.createTextVNode(o.toDisplayString(o.unref(x)("common.cancel")),1)];r(`${p(o.unref(x)("common.cancel"))}`)}),_:1},a,l)),r(m(w,{type:"submit",loading:D.value,disabled:!q.value||D.value},{default:o.withCtx((e,r,a,l)=>{if(!r)return[o.createTextVNode(o.toDisplayString(o.unref(x)("profile.change")),1)];r(`${p(o.unref(x)("profile.change"))}`)}),_:1},a,l)),r("</div></form>")}),_:1},d)),s("</div>")}}}),k=y.setup;y.setup=(e,r)=>{const a=o.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/profile/[username].vue"),k?k(e,r):void 0};export{y as default};
//# sourceMappingURL=_username_-CDj5tN4C.mjs.map
