import{_ as t}from"./nuxt-link-4uLnvjVp.mjs";import{_ as e}from"./Button-BAc5buFc.mjs";import{_ as a}from"./Input-CQRSLkRN.mjs";import{_ as r}from"./Select-BXAA3UYM.mjs";import{v as i,u as s,a as o}from"./server.mjs";import{u as l}from"./v3-CdJoEeaK.mjs";import{_ as c}from"./_plugin-vue_export-helper-1tPrXgE0.mjs";import{B as n,C as d,z as u,E as v,F as p}from"../routes/renderer.mjs";import{K as g}from"../_/shared.esm-bundler.mjs";import"../nitro/nitro.mjs";import"node:events";import"node:process";import"cloudflare:workers";import"node:buffer";import"node:timers";import"@prisma/client";import"node:util";import"node:zlib";import"node:stream";import"node:url";import"node:net";import"node:path";import"../_/index4.mjs";import"../_/client.DwfV9Oyl.mjs";const m=i.defineComponent({__name:"index",__ssrInlineRender:!0,setup(c){const{t:m}=s();l({title:m("rules.pageTitle")});const x=i.ref(""),y=i.ref({visibility:"all",sort:"updated"}),b=i.ref([]),h=i.ref(["eslint","prettier","typescript","react","vue","nuxt","tailwind"]),f=i.ref([]),k=i.ref(!1),$=i.ref(1),w=i.ref(0),V=i.computed(()=>Math.ceil(w.value/12)),j=i.computed(()=>{const t=[],e=Math.max(1,$.value-2),a=Math.min(V.value,e+4);for(let r=e;r<=a;r++)t.push(r);return t}),{$rpc:C}=o(),fetchRules=async()=>{k.value=!0;try{const t=await C.rules.search({limit:12,page:$.value,sortBy:y.value.sort,visibility:"all"===y.value.visibility?void 0:y.value.visibility,query:x.value||void 0,tags:b.value.length>0?b.value:void 0});f.value=t.rules.map(t=>({...t,tags:t.tags||[],description:t.description||""})),w.value=t.total}catch(t){console.error("Failed to fetch rules:",t)}finally{k.value=!1}},{locale:_}=s(),formatDate=t=>new Date(1e3*t).toLocaleDateString("ja"===_.value?"ja-JP":"en-US"),getRuleUrl=t=>t.organization?`/rules/@${t.organization.name}/${t.name}`:`/rules/@${t.author.username}/${t.name}`;let B;const debouncedSearch=()=>{clearTimeout(B),B=setTimeout(()=>{$.value=1,fetchRules()},300)};return i.watch($,fetchRules),(s,o,l,c)=>{const m=t,w=e,C=a,_=r;o(`<div${n(i.mergeProps({class:"min-h-screen bg-gray-50 dark:bg-gray-950"},c))} data-v-c12630cc><div class="container-lg py-8" data-v-c12630cc><div class="flex items-center justify-between mb-8" data-v-c12630cc><div class="stagger-item stagger-1" data-v-c12630cc><h1 class="heading-1 mb-2" data-v-c12630cc>${d(s.$t("rules.title"))}</h1><p class="text-gray-600 dark:text-gray-400" data-v-c12630cc>${d(s.$t("rules.subtitle"))}</p></div>`),o(u(m,{to:"/rules/new",class:"stagger-item stagger-2"},{default:i.withCtx((t,e,a,r)=>{if(!e)return[i.createVNode(w,{variant:"primary",class:"hover-lift"},{default:i.withCtx(()=>[(i.openBlock(),i.createBlock("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])),i.createTextVNode(" "+i.toDisplayString(s.$t("rules.createRule")),1)]),_:1})];e(u(w,{variant:"primary",class:"hover-lift"},{default:i.withCtx((t,e,a,r)=>{if(!e)return[(i.openBlock(),i.createBlock("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])),i.createTextVNode(" "+i.toDisplayString(s.$t("rules.createRule")),1)];e(`<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c12630cc${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" data-v-c12630cc${r}></path></svg> ${d(s.$t("rules.createRule"))}`)}),_:1},a,r))}),_:1},l)),o('</div><div class="space-y-6 mb-8 stagger-item stagger-3" data-v-c12630cc><div class="flex flex-col lg:flex-row gap-4 items-start lg:items-center" data-v-c12630cc><div class="flex-1 relative group" data-v-c12630cc>'),o(u(C,{modelValue:x.value,"onUpdate:modelValue":t=>x.value=t,placeholder:s.$t("rules.searchPlaceholder"),onInput:debouncedSearch,class:"transition-all duration-300 focus-within:scale-[1.02] focus-within:shadow-lg"},{prefix:i.withCtx((t,e,a,r)=>{if(!e)return[(i.openBlock(),i.createBlock("svg",{class:"w-5 h-5 text-gray-400 group-focus-within:text-primary-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i.createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]))];e(`<svg class="w-5 h-5 text-gray-400 group-focus-within:text-primary-500 transition-colors duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c12630cc${r}><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" data-v-c12630cc${r}></path></svg>`)}),_:1},l)),o('</div><div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto" data-v-c12630cc>'),o(u(_,{modelValue:y.value.visibility,"onUpdate:modelValue":t=>y.value.visibility=t,onChange:fetchRules,class:"sm:min-w-[200px] transition-all duration-200 hover:shadow-md focus:scale-[1.02]"},{default:i.withCtx((t,e,a,r)=>{if(!e)return[i.createVNode("option",{value:"all"},i.toDisplayString(s.$t("rules.visibility.all")),1),i.createVNode("option",{value:"public"},i.toDisplayString(s.$t("rules.visibility.public")),1),i.createVNode("option",{value:"private"},i.toDisplayString(s.$t("rules.visibility.private")),1),i.createVNode("option",{value:"organization"},i.toDisplayString(s.$t("rules.visibility.organization")),1)];e(`<option value="all" data-v-c12630cc${r}>${d(s.$t("rules.visibility.all"))}</option><option value="public" data-v-c12630cc${r}>${d(s.$t("rules.visibility.public"))}</option><option value="private" data-v-c12630cc${r}>${d(s.$t("rules.visibility.private"))}</option><option value="organization" data-v-c12630cc${r}>${d(s.$t("rules.visibility.organization"))}</option>`)}),_:1},l)),o(u(_,{modelValue:y.value.sort,"onUpdate:modelValue":t=>y.value.sort=t,onChange:fetchRules,class:"sm:min-w-[200px] transition-all duration-200 hover:shadow-md focus:scale-[1.02]"},{default:i.withCtx((t,e,a,r)=>{if(!e)return[i.createVNode("option",{value:"updated"},i.toDisplayString(s.$t("rules.sort.recentlyUpdated")),1),i.createVNode("option",{value:"created"},i.toDisplayString(s.$t("rules.sort.recentlyCreated")),1),i.createVNode("option",{value:"name"},i.toDisplayString(s.$t("rules.sort.alphabetical")),1)];e(`<option value="updated" data-v-c12630cc${r}>${d(s.$t("rules.sort.recentlyUpdated"))}</option><option value="created" data-v-c12630cc${r}>${d(s.$t("rules.sort.recentlyCreated"))}</option><option value="name" data-v-c12630cc${r}>${d(s.$t("rules.sort.alphabetical"))}</option>`)}),_:1},l)),o("</div></div>"),h.value.length>0?(o(`<div class="flex flex-wrap items-center gap-2 stagger-item stagger-4" data-v-c12630cc><span class="text-sm text-gray-600 dark:text-gray-400" data-v-c12630cc>${d(s.$t("rules.popularTags"))}</span>\x3c!--[--\x3e`),v(h.value,t=>{o(`<button class="${p(["px-3 py-1 rounded-full text-sm transition-colors",b.value.includes(t)?"bg-primary-500 text-white hover:bg-primary-600":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"])}" data-v-c12630cc>${d(t)}</button>`)}),o("\x3c!--]--\x3e</div>")):o("\x3c!----\x3e"),o("</div>"),k.value?(o('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" data-v-c12630cc>\x3c!--[--\x3e'),v(6,t=>{o('<div class="card" data-v-c12630cc><div class="skeleton h-6 w-3/4 mb-3" data-v-c12630cc></div><div class="skeleton h-4 w-1/2 mb-4" data-v-c12630cc></div><div class="skeleton h-4 w-full mb-2" data-v-c12630cc></div><div class="skeleton h-4 w-2/3" data-v-c12630cc></div></div>')}),o("\x3c!--]--\x3e</div>")):f.value.length>0?(o('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 stagger-item stagger-5" data-v-c12630cc>\x3c!--[--\x3e'),v(f.value,(t,e)=>{o(u(m,{key:t.id,to:getRuleUrl(t),class:["card-hover group transition-all duration-300 hover:scale-[1.02] hover:-translate-y-2 hover:shadow-2xl stagger-item",`stagger-${Math.min(e+6,8)}`]},{default:i.withCtx((e,a,r,o)=>{if(!a)return[i.createVNode("div",{class:"flex items-start justify-between mb-3"},[i.createVNode("div",{class:"flex-1 min-w-0"},[i.createVNode("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors"},i.toDisplayString(t.name),1),i.createVNode("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," by "+i.toDisplayString(t.organization?"@"+t.organization.name:t.author.username),1)]),i.createVNode("span",{class:["ml-2 px-2 py-1 text-xs rounded-full","public"===t.visibility?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"private"===t.visibility?"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"]},i.toDisplayString(s.$t(`rules.visibility.${t.visibility}`)),3)]),t.description?(i.openBlock(),i.createBlock("p",{key:0,class:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3"},i.toDisplayString(t.description),1)):i.createCommentVNode("",!0),t.tags&&t.tags.length>0?(i.openBlock(),i.createBlock("div",{key:1,class:"flex flex-wrap gap-1 mb-4"},[(i.openBlock(!0),i.createBlock(i.Fragment,null,i.renderList(t.tags,t=>(i.openBlock(),i.createBlock("span",{key:t,class:"px-2 py-1 text-xs bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded"},i.toDisplayString(t),1))),128))])):i.createCommentVNode("",!0),i.createVNode("div",{class:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400"},[i.createVNode("span",null,"v"+i.toDisplayString(t.version),1),i.createVNode("span",null,i.toDisplayString(formatDate(t.updated_at)),1)])];a(`<div class="flex items-start justify-between mb-3" data-v-c12630cc${o}><div class="flex-1 min-w-0" data-v-c12630cc${o}><h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 truncate group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors" data-v-c12630cc${o}>${d(t.name)}</h3><p class="text-sm text-gray-600 dark:text-gray-400 mt-1" data-v-c12630cc${o}> by ${d(t.organization?"@"+t.organization.name:t.author.username)}</p></div><span class="${p(["ml-2 px-2 py-1 text-xs rounded-full","public"===t.visibility?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"private"===t.visibility?"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"])}" data-v-c12630cc${o}>${d(s.$t(`rules.visibility.${t.visibility}`))}</span></div>`),t.description?a(`<p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3" data-v-c12630cc${o}>${d(t.description)}</p>`):a("\x3c!----\x3e"),t.tags&&t.tags.length>0?(a(`<div class="flex flex-wrap gap-1 mb-4" data-v-c12630cc${o}>\x3c!--[--\x3e`),v(t.tags,t=>{a(`<span class="px-2 py-1 text-xs bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded" data-v-c12630cc${o}>${d(t)}</span>`)}),a("\x3c!--]--\x3e</div>")):a("\x3c!----\x3e"),a(`<div class="flex items-center justify-between text-sm text-gray-600 dark:text-gray-400" data-v-c12630cc${o}><span data-v-c12630cc${o}>v${d(t.version)}</span><span data-v-c12630cc${o}>${d(formatDate(t.updated_at))}</span></div>`)}),_:2},l))}),o("\x3c!--]--\x3e</div>")):(o(`<div class="text-center py-12" data-v-c12630cc><svg class="w-24 h-24 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c12630cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-v-c12630cc></path></svg><h3 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2" data-v-c12630cc>${d(s.$t("rules.noRulesFound"))}</h3><p class="text-gray-600 dark:text-gray-400 mb-6" data-v-c12630cc>${d(s.$t("rules.createFirstRule"))}</p>`),o(u(m,{to:"/rules/new"},{default:i.withCtx((t,e,a,r)=>{if(!e)return[i.createVNode(w,{variant:"primary"},{default:i.withCtx(()=>[i.createTextVNode(i.toDisplayString(s.$t("rules.createRule")),1)]),_:1})];e(u(w,{variant:"primary"},{default:i.withCtx((t,e,a,r)=>{if(!e)return[i.createTextVNode(i.toDisplayString(s.$t("rules.createRule")),1)];e(`${d(s.$t("rules.createRule"))}`)}),_:1},a,r))}),_:1},l)),o("</div>")),V.value>1?(o(`<div class="mt-8 flex justify-center" data-v-c12630cc><nav class="flex items-center space-x-1" data-v-c12630cc><button${g(1===$.value)?" disabled":""} class="px-3 py-2 rounded-lg text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" data-v-c12630cc><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c12630cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" data-v-c12630cc></path></svg></button>\x3c!--[--\x3e`),v(j.value,t=>{o(`<button class="${p(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",t===$.value?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800"])}" data-v-c12630cc>${d(t)}</button>`)}),o(`\x3c!--]--\x3e<button${g($.value===V.value)?" disabled":""} class="px-3 py-2 rounded-lg text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors" data-v-c12630cc><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-c12630cc><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" data-v-c12630cc></path></svg></button></nav></div>`)):o("\x3c!----\x3e"),o("</div></div>")}}}),x=m.setup;m.setup=(t,e)=>{const a=i.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/rules/index.vue"),x?x(t,e):void 0};const y=c(m,[["__scopeId","data-v-c12630cc"]]);export{y as default};
//# sourceMappingURL=index-B4VmaAYn.mjs.map
