import{u as e,v as t,a as l}from"./server.mjs";import{u as a}from"./v3-CdJoEeaK.mjs";import{B as r,C as i,G as s,D as o,H as u,E as n,z as d}from"../routes/renderer.mjs";import{K as c}from"../_/shared.esm-bundler.mjs";import"../nitro/nitro.mjs";import"node:events";import"node:process";import"cloudflare:workers";import"node:buffer";import"node:timers";import"@prisma/client";import"node:util";import"node:zlib";import"node:stream";import"node:url";import"node:net";import"node:path";import"../_/index4.mjs";import"../_/client.DwfV9Oyl.mjs";const m={__name:"new",__ssrInlineRender:!0,setup(m){const{t:p}=e();a({title:p("rules.newRuleTitle")});const v=t.ref({name:"",org:"",description:"",visibility:"public",organizationId:"",tags:[],content:""}),x=t.ref(""),f=t.ref([]),b=t.ref(!1),$=t.ref(""),y=t.ref(""),g=t.ref(!1),addTag=()=>{const e=x.value.trim().toLowerCase();e&&!v.value.tags.includes(e)&&(v.value.tags.push(e),x.value="")},{$rpc:h}=l();return(e,l,a,m)=>{const p=t.resolveComponent("Button");l(`<div${r(t.mergeProps({class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},m))}><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 dark:text-white">${i(e.$t("rules.createNewRule"))}</h1><p class="mt-2 text-sm text-gray-600 dark:text-gray-400">${i(e.$t("rules.shareWithCommunity"))}</p></div><form class="space-y-6"><div class="card"><h2 class="text-lg font-medium text-gray-900 dark:text-white mb-4">${i(e.$t("rules.basicInfo"))}</h2><div class="space-y-4"><div><label for="name" class="label">${i(e.$t("rules.form.name"))}</label><input id="name"${s("value",v.value.name)} type="text" required pattern="[a-zA-Z0-9_-]+" class="input" placeholder="my-awesome-rule"><p class="mt-1 text-xs text-gray-500 dark:text-gray-400">${i(e.$t("rules.form.nameHint"))}</p></div><div><label for="description" class="label">${i(e.$t("rules.form.description"))}</label><textarea id="description" rows="3" class="input"${s("placeholder",e.$t("rules.form.descriptionPlaceholder"))}>${i(v.value.description)}</textarea></div><div><label for="visibility" class="label">${i(e.$t("rules.form.visibility"))}</label><select id="visibility" class="input"><option value="public"${c(Array.isArray(v.value.visibility)?o(v.value.visibility,"public"):u(v.value.visibility,"public"))?" selected":""}>${i(e.$t("rules.form.visibilityOptions.public"))}</option><option value="private"${c(Array.isArray(v.value.visibility)?o(v.value.visibility,"private"):u(v.value.visibility,"private"))?" selected":""}>${i(e.$t("rules.form.visibilityOptions.private"))}</option></select></div><div><label for="organization" class="label">${i(e.$t("rules.form.organization"))} (${i(e.$t("common.optional"))})</label><select id="organization" class="input"><option value=""${c(Array.isArray(y.value)?o(y.value,""):u(y.value,""))?" selected":""}>${i(e.$t("rules.form.noOrganization"))}</option>\x3c!--[--\x3e`),n(f.value,e=>{l(`<option${s("value",e.id)}${c(Array.isArray(y.value)?o(y.value,e.id):u(y.value,e.id))?" selected":""}>${i(e.displayName)}</option>`)}),l("\x3c!--]--\x3e</select>"),v.value.org?l(`<p class="mt-1 text-xs text-gray-500 dark:text-gray-400">${i(e.$t("rules.form.urlPreview"))} @${i(v.value.org)}/${i(v.value.name||"rule-name")}</p>`):l("\x3c!----\x3e"),l(`<p class="mt-1 text-xs text-gray-500 dark:text-gray-400">${i(e.$t("rules.form.organizationHint"))}</p></div><div><label for="tags" class="label">${i(e.$t("rules.form.tags"))}</label><div class="flex gap-2 mb-2"><input${s("value",x.value)} type="text" class="input flex-1"${s("placeholder",e.$t("rules.form.tagsPlaceholder"))}>`),l(d(p,{type:"button",onClick:addTag,variant:"secondary",size:"sm"},{default:t.withCtx((l,a,r,s)=>{if(!a)return[t.createTextVNode(t.toDisplayString(e.$t("rules.form.addTag")),1)];a(`${i(e.$t("rules.form.addTag"))}`)}),_:1},a)),l('</div><div class="flex flex-wrap gap-2">\x3c!--[--\x3e'),n(v.value.tags,(e,t)=>{l(`<span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">${i(e)} <button type="button" class="ml-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200"> Ã— </button></span>`)}),l(`\x3c!--]--\x3e</div></div></div></div><div class="card"><h2 class="text-lg font-medium text-gray-900 dark:text-white mb-4">${i(e.$t("rules.ruleContent"))}</h2><div class="space-y-4"><div><label for="content" class="label">${i(e.$t("rules.form.content"))}</label><div class="mb-2">`),l(d(p,{type:"button",onClick:e=>g.value=!g.value,variant:"ghost",size:"sm"},{default:t.withCtx((l,a,r,s)=>{if(!a)return[t.createTextVNode(t.toDisplayString(g.value?e.$t("rules.form.writeDirectly"):e.$t("rules.form.uploadMarkdown")),1)];a(`${i(g.value?e.$t("rules.form.writeDirectly"):e.$t("rules.form.uploadMarkdown"))}`)}),_:1},a)),l("</div>"),g.value?l('<div class="mb-4"><input type="file" accept=".md,.markdown" class="block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 dark:file:bg-blue-900 dark:file:text-blue-200 hover:file:bg-blue-100 dark:hover:file:bg-blue-800"></div>'):l("\x3c!----\x3e"),l(`<textarea id="content" rows="15" required class="input font-mono text-sm"${s("placeholder",e.$t("rules.form.contentPlaceholder"))}>${i(v.value.content)}</textarea><p class="mt-1 text-xs text-gray-500 dark:text-gray-400">${i(e.$t("rules.form.markdownSupported"))}</p></div></div></div><div class="flex justify-end gap-4">`),l(d(p,{tag:e.NuxtLink,to:"/rules",variant:"secondary"},{default:t.withCtx((l,a,r,s)=>{if(!a)return[t.createTextVNode(t.toDisplayString(e.$t("common.cancel")),1)];a(`${i(e.$t("common.cancel"))}`)}),_:1},a)),l(d(p,{type:"submit",loading:b.value,disabled:b.value,variant:"primary"},{default:t.withCtx((l,a,r,s)=>{if(!a)return[t.createTextVNode(t.toDisplayString(b.value?e.$t("rules.creating"):e.$t("rules.createRule")),1)];a(`${i(b.value?e.$t("rules.creating"):e.$t("rules.createRule"))}`)}),_:1},a)),l("</div>"),$.value?l(`<div class="rounded-md bg-red-50 dark:bg-red-900/20 p-4"><p class="text-sm text-red-800 dark:text-red-400">${i($.value)}</p></div>`):l("\x3c!----\x3e"),l("</form></div>")}}},p=m.setup;m.setup=(e,l)=>{const a=t.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/rules/new.vue"),p?p(e,l):void 0};export{m as default};
//# sourceMappingURL=new-BJ89lsD3.mjs.map
