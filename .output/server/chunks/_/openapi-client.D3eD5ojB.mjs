import{d as r,j as e,m as a,N as t,E as i,k as n,l as s,n as o}from"./client.DwfV9Oyl.mjs";class StandardBracketNotationSerializer{maxArrayIndex;constructor(r={}){this.maxArrayIndex=r.maxBracketNotationArrayIndex??9999}serialize(e,a=[],t=[]){if(Array.isArray(e))e.forEach((r,e)=>{this.serialize(r,[...a,e],t)});else if(r(e))for(const r in e)this.serialize(e[r],[...a,r],t);else t.push([this.stringifyPath(a),e]);return t}deserialize(e){if(0===e.length)return{};const a=new WeakSet,t={value:[]};for(const[i,n]of e){const e=this.parsePath(i);let s=t,o="value";e.forEach((t,i)=>{Array.isArray(s[o])||r(s[o])||(s[o]=[]),i!==e.length-1?Array.isArray(s[o])&&!isValidArrayIndex(t,this.maxArrayIndex)&&(a.has(s[o])?(a.delete(s[o]),s[o]=pushStyleArrayToObject(s[o])):s[o]=arrayToObject(s[o])):Array.isArray(s[o])&&(""===t?s[o].length&&!a.has(s[o])&&(s[o]=arrayToObject(s[o])):a.has(s[o])?(a.delete(s[o]),s[o]=pushStyleArrayToObject(s[o])):isValidArrayIndex(t,this.maxArrayIndex)||(s[o]=arrayToObject(s[o]))),s=s[o],o=t}),Array.isArray(s)&&""===o?(a.add(s),s.push(n)):o in s?Array.isArray(s[o])?s[o].push(n):s[o]=[s[o],n]:s[o]=n}return t.value}stringifyPath(r){return r.map(r=>r.toString().replace(/[\\[\]]/g,r=>{switch(r){case"\\":return"\\\\";case"[":return"\\[";case"]":return"\\]";default:return r}})).reduce((r,e,a)=>0===a?e:`${r}[${e}]`,"")}parsePath(r){const e=[];let a=!1,t="",i=0;for(let n=0;n<r.length;n++){const s=r[n],o=r[n+1];!a||"]"!==s||void 0!==o&&"["!==o||i%2!=0?0===e.length&&"["===s&&i%2==0?(a=!0,e.push(t),t=""):"\\"===s?i++:(t+="\\".repeat(i/2)+s,i=0):(void 0===o&&(a=!1),e.push(t),t="",n++)}return a||0===e.length?[r]:e}}function isValidArrayIndex(r,e){return/^0$|^[1-9]\d*$/.test(r)&&Number(r)<=e}function arrayToObject(r){const e=new t;return r.forEach((r,a)=>{e[a]=r}),e}function pushStyleArrayToObject(r){const e=new t;return e[""]=1===r.length?r[0]:r,e}class StandardOpenAPIJsonSerializer{customSerializers;constructor(r={}){this.customSerializers=r.customJsonSerializers??[]}serialize(e,a={value:!1}){for(const r of this.customSerializers)if(r.condition(e)){return this.serialize(r.serialize(e),a)}if(e instanceof Blob)return a.value=!0,[e,a.value];if(e instanceof Set)return this.serialize(Array.from(e),a);if(e instanceof Map)return this.serialize(Array.from(e.entries()),a);if(Array.isArray(e)){return[e.map(r=>void 0===r?null:this.serialize(r,a)[0]),a.value]}if(r(e)){const r={};for(const t in e)"toJSON"===t&&"function"==typeof e[t]||(r[t]=this.serialize(e[t],a)[0]);return[r,a.value]}return"bigint"==typeof e||e instanceof RegExp||e instanceof URL?[e.toString(),a.value]:e instanceof Date?[Number.isNaN(e.getTime())?null:e.toISOString(),a.value]:Number.isNaN(e)?[null,a.value]:[e,a.value]}}function standardizeHTTPPath(r){return`/${r.replace(/\/{2,}/g,"/").replace(/^\/|\/$/g,"")}`}function getDynamicParams(r){return r?standardizeHTTPPath(r).match(/\/\{[^}]+\}/g)?.map(r=>({raw:r,name:r.match(/\{\+?([^}]+)\}/)[1]})):void 0}class StandardOpenAPISerializer{constructor(r,e){this.jsonSerializer=r,this.bracketNotation=e}serialize(r,t={}){return e(r)&&!t.outputFormat?a(r,{value:async r=>this.#r(r,{outputFormat:"plain"}),error:async r=>new i({data:this.#r(n(r).toJSON(),{outputFormat:"plain"}),cause:r})}):this.#r(r,t)}#r(r,e){const[a,t]=this.jsonSerializer.serialize(r);if("plain"===e.outputFormat)return a;if("URLSearchParams"===e.outputFormat){const r=new URLSearchParams;for(const[e,t]of this.bracketNotation.serialize(a))"string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||r.append(e,t.toString());return r}if(a instanceof Blob||void 0===a||!t)return a;const i=new FormData;for(const[r,e]of this.bracketNotation.serialize(a))"string"==typeof e||"number"==typeof e||"boolean"==typeof e?i.append(r,e.toString()):e instanceof Blob&&i.append(r,e);return i}deserialize(r){return r instanceof URLSearchParams||r instanceof FormData?this.bracketNotation.deserialize(Array.from(r.entries())):e(r)?a(r,{value:async r=>r,error:async r=>r instanceof i&&s(r.data)?o(r.data,{cause:r}):r}):r}}export{StandardOpenAPIJsonSerializer as S,StandardBracketNotationSerializer as a,StandardOpenAPISerializer as b,getDynamicParams as g,standardizeHTTPPath as s};
//# sourceMappingURL=openapi-client.D3eD5ojB.mjs.map
