{"version":3,"file":"emailVerification.mjs","sources":["../../../../server/services/emailVerification.ts"],"sourcesContent":null,"names":["EmailVerificationService","constructor","prisma","env","__publicField","this","emailService","EmailService","createVerificationToken","userId","token","generateId","expiresAt","Math","floor","Date","now","emailVerification","create","data","id","sendVerificationEmail","email","userLocale","emailData","verificationToken","verificationUrl","APP_URL","FRONTEND_URL","emailTemplate","generateEmailVerificationEmail","sendEmail","_error","verifyEmail","verification","findUnique","where","include","user","success","message","usedAt","update","emailVerified","resendVerificationEmail","updateMany"],"mappings":"4ZAKO,MAAMA,yBAKZ,WAAAC,CAAYC,EAAsBC,GAJlCC,cAAAC,KAAQ,UACRD,cAAAC,KAAQ,gBACRD,cAAAC,KAAQ,OAGPA,KAAKH,OAASA,EACdG,KAAKC,aAAe,IAAIC,EAAaJ,GACrCE,KAAKF,IAAMA,CACZ,CAEA,6BAAMK,CAAwBC,GAC7B,MAAMC,EAAQC,IACRC,EAAYC,KAAKC,MAAMC,KAAKC,MAAQ,KAAQ,MAWlD,aATMX,KAAKH,OAAOe,kBAAkBC,OAAO,CAC1CC,KAAM,CACLC,GAAIT,IACJF,SACAC,QACAE,eAIKF,CACR,CAEA,2BAAMW,CACLZ,EACAa,EACAC,GAEA,IAEC,MAAMb,QAAcL,KAAKG,wBAAwBC,GAG3Ce,EAAmC,CACxCF,QACAG,kBAAmBf,EACnBgB,gBAAiB,GAAGrB,KAAKF,IAAIwB,SAAWtB,KAAKF,IAAIyB,cAAgB,wCAAwClB,IACzGa,cAGKM,EAAgBxB,KAAKC,aAAawB,+BAA+BN,GAGvE,aAAanB,KAAKC,aAAayB,UAAUF,EAC1C,OAASG,GACR,OAAO,CACR,CACD,CAEA,iBAAMC,CAAYvB,GAKjB,IAEC,MAAMwB,QAAqB7B,KAAKH,OAAOe,kBAAkBkB,WAAW,CACnEC,MAAO,CAAE1B,SACT2B,QAAS,CAAEC,MAAM,KAGlB,IAAKJ,EACJ,MAAO,CAAEK,SAAS,EAAOC,QAAS,8BAInC,MAAMxB,EAAMH,KAAKC,MAAMC,KAAKC,MAAQ,KACpC,OAAIkB,EAAatB,UAAYI,EACrB,CAAEuB,SAAS,EAAOC,QAAS,kCAI/BN,EAAaO,OACT,CAAEF,SAAS,EAAOC,QAAS,mDAK7BnC,KAAKH,OAAOe,kBAAkByB,OAAO,CAC1CN,MAAO,CAAEhB,GAAIc,EAAad,IAC1BD,KAAM,CAAEsB,OAAQzB,WAGXX,KAAKH,OAAOoC,KAAKI,OAAO,CAC7BN,MAAO,CAAEhB,GAAIc,EAAazB,QAC1BU,KAAM,CAAEwB,eAAe,KAGjB,CAAEJ,SAAS,EAAM9B,OAAQyB,EAAazB,QAC9C,OAASuB,GACR,MAAO,CAAEO,SAAS,EAAOC,QAAS,wBACnC,CACD,CAEA,6BAAMI,CAAwBtB,EAAeC,GAC5C,IAEC,MAAMe,QAAajC,KAAKH,OAAOoC,KAAKH,WAAW,CAC9CC,MAAO,CAAEd,WAGV,OAAKgB,MAMDA,EAAKK,sBAKHtC,KAAKH,OAAOe,kBAAkB4B,WAAW,CAC9CT,MAAO,CACN3B,OAAQ6B,EAAKlB,GACbqB,OAAQ,MAETtB,KAAM,CACLsB,OAAQ5B,KAAKC,MAAMC,KAAKC,MAAQ,cAKrBX,KAAKgB,sBAAsBiB,EAAKlB,GAAIE,EAAOC,IACzD,OAASS,GACR,OAAO,CACR,CACD"}