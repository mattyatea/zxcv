import{w as e,x as t,j as a,s as n,y as r,z as o,E as s,A as d,q as i,B as c,C as u,D as l,F as h}from"./client.DwfV9Oyl.mjs";async function toStandardBody(e){const t=e.headers.get("content-disposition");if("string"==typeof t){const a=d(t)??"blob",n=await e.blob();return new File([n],a,{type:n.type})}const a=e.headers.get("content-type");if(!a||a.startsWith("application/json")){const t=await e.text();return i(t)}if(a.startsWith("multipart/form-data"))return await e.formData();if(a.startsWith("application/x-www-form-urlencoded")){const t=await e.text();return new URLSearchParams(t)}if(a.startsWith("text/event-stream"))return function(e){const t=e?.pipeThrough(new TextDecoderStream).pipeThrough(new c),a=t?.getReader();return new u(async()=>{for(;;){if(void 0===a)return{done:!0,value:void 0};const{done:e,value:t}=await a.read();if(e)return{done:!0,value:void 0};switch(t.event){case"message":{let e=i(t.data);return l(e)&&(e=h(e,t)),{done:!1,value:e}}case"error":{let e=new s({data:i(t.data)});throw e=h(e,t),e}case"done":{let e=i(t.data);return l(e)&&(e=h(e,t)),{done:!0,value:e}}}}},async()=>{await(a?.cancel())})}(e.body);if(a.startsWith("text/plain"))return await e.text();const n=await e.blob();return new File([n],"blob",{type:n.type})}function toFetchBody(e,d,i={}){const c=d.get("content-disposition");if(d.delete("content-type"),d.delete("content-disposition"),void 0!==e)return e instanceof Blob?(d.set("content-type",e.type),d.set("content-length",e.size.toString()),d.set("content-disposition",c??t(e instanceof File?e.name:"blob")),e):e instanceof FormData||e instanceof URLSearchParams?e:a(e)?(d.set("content-type","text/event-stream"),function(e,t={}){const a=t.eventIteratorKeepAliveEnabled??!0,d=t.eventIteratorKeepAliveInterval??5e3,i=t.eventIteratorKeepAliveComment??"";let c,u=!1;return new ReadableStream({async pull(t){try{a&&(c=setInterval(()=>{t.enqueue(r({comments:[i]}))},d));const s=await e.next();if(clearInterval(c),u)return;const l=o(s.value);s.done&&void 0===s.value&&void 0===l||t.enqueue(r({...l,event:s.done?"done":"message",data:n(s.value)})),s.done&&t.close()}catch(e){if(clearInterval(c),u)return;t.enqueue(r({...o(e),event:"error",data:e instanceof s?n(e.data):void 0})),t.close()}},async cancel(){u=!0,clearInterval(c),await(e.return?.())}}).pipeThrough(new TextEncoderStream)}(e,i)):(d.set("content-type","application/json"),n(e))}function toStandardHeaders(e,t={}){for(const[a,n]of e)Array.isArray(t[a])?t[a].push(n):void 0!==t[a]?t[a]=[t[a],n]:t[a]=n;return t}function toFetchHeaders(e,t=new Headers){for(const[a,n]of Object.entries(e))if(Array.isArray(n))for(const e of n)t.append(a,e);else void 0!==n&&t.append(a,n);return t}function toStandardLazyRequest(t){return{url:new URL(t.url),signal:t.signal,method:t.method,body:e(()=>toStandardBody(t)),get headers(){const e=toStandardHeaders(t.headers);return Object.defineProperty(this,"headers",{value:e,writable:!0}),e},set headers(e){Object.defineProperty(this,"headers",{value:e,writable:!0})}}}function toFetchRequest(e,t={}){const a=toFetchHeaders(e.headers),n=toFetchBody(e.body,a,t);return new Request(e.url,{signal:e.signal,method:e.method,headers:a,body:n})}function toFetchResponse(e,t={}){const a=toFetchHeaders(e.headers),n=toFetchBody(e.body,a,t);return new Response(n,{headers:a,status:e.status})}function toStandardLazyResponse(t){return{body:e(()=>toStandardBody(t)),status:t.status,get headers(){const e=toStandardHeaders(t.headers);return Object.defineProperty(this,"headers",{value:e,writable:!0}),e},set headers(e){Object.defineProperty(this,"headers",{value:e,writable:!0})}}}export{toFetchResponse as a,toFetchRequest as b,toStandardLazyResponse as c,toStandardLazyRequest as t};
//# sourceMappingURL=index4.mjs.map
